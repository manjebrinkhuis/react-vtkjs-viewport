!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("vtk.js/Sources/macro"),require("cornerstone-core"),require("vtk.js/Sources/Rendering/Core/Coordinate"),require("vtk.js/Sources/Rendering/Core/InteractorStyle/Constants"),require("vtk.js/Sources/Common/Core/Math"),require("vtk.js/Sources/Common/Core/MatrixBuilder"),require("vtk.js/Sources/Rendering/Misc/GenericRenderWindow"),require("vtk.js/Sources/Widgets/Core/WidgetManager"),require("vtk.js/Sources/Filters/General/PaintFilter"),require("vtk.js/Sources/Widgets/Widgets3D/PaintWidget"),require("vtk.js/Sources/Widgets/Core/WidgetManager/Constants"),require("vtk.js/Sources/Common/DataModel/ImageData"),require("vtk.js/Sources/Common/Core/DataArray"),require("cornerstone-tools"),require("vtk.js/Sources/Rendering/Core/Renderer"),require("vtk.js/Sources/Interaction/Style/InteractorStyleManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballRotateManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballPanManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballZoomManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseRangeManipulator"),require("vtk.js/Sources/Rendering/Core/Volume"),require("vtk.js/Sources/Rendering/Core/VolumeMapper"),require("vtk.js/Sources/Rendering/Core/ColorTransferFunction"),require("vtk.js/Sources/Common/DataModel/PiecewiseFunction")):"function"==typeof define&&define.amd?define(["react","vtk.js/Sources/macro","cornerstone-core","vtk.js/Sources/Rendering/Core/Coordinate","vtk.js/Sources/Rendering/Core/InteractorStyle/Constants","vtk.js/Sources/Common/Core/Math","vtk.js/Sources/Common/Core/MatrixBuilder","vtk.js/Sources/Rendering/Misc/GenericRenderWindow","vtk.js/Sources/Widgets/Core/WidgetManager","vtk.js/Sources/Filters/General/PaintFilter","vtk.js/Sources/Widgets/Widgets3D/PaintWidget","vtk.js/Sources/Widgets/Core/WidgetManager/Constants","vtk.js/Sources/Common/DataModel/ImageData","vtk.js/Sources/Common/Core/DataArray","cornerstone-tools","vtk.js/Sources/Rendering/Core/Renderer","vtk.js/Sources/Interaction/Style/InteractorStyleManipulator","vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballRotateManipulator","vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballPanManipulator","vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballZoomManipulator","vtk.js/Sources/Interaction/Manipulators/MouseRangeManipulator","vtk.js/Sources/Rendering/Core/Volume","vtk.js/Sources/Rendering/Core/VolumeMapper","vtk.js/Sources/Rendering/Core/ColorTransferFunction","vtk.js/Sources/Common/DataModel/PiecewiseFunction"],e):"object"==typeof exports?exports.VTKViewport=e(require("react"),require("vtk.js/Sources/macro"),require("cornerstone-core"),require("vtk.js/Sources/Rendering/Core/Coordinate"),require("vtk.js/Sources/Rendering/Core/InteractorStyle/Constants"),require("vtk.js/Sources/Common/Core/Math"),require("vtk.js/Sources/Common/Core/MatrixBuilder"),require("vtk.js/Sources/Rendering/Misc/GenericRenderWindow"),require("vtk.js/Sources/Widgets/Core/WidgetManager"),require("vtk.js/Sources/Filters/General/PaintFilter"),require("vtk.js/Sources/Widgets/Widgets3D/PaintWidget"),require("vtk.js/Sources/Widgets/Core/WidgetManager/Constants"),require("vtk.js/Sources/Common/DataModel/ImageData"),require("vtk.js/Sources/Common/Core/DataArray"),require("cornerstone-tools"),require("vtk.js/Sources/Rendering/Core/Renderer"),require("vtk.js/Sources/Interaction/Style/InteractorStyleManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballRotateManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballPanManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballZoomManipulator"),require("vtk.js/Sources/Interaction/Manipulators/MouseRangeManipulator"),require("vtk.js/Sources/Rendering/Core/Volume"),require("vtk.js/Sources/Rendering/Core/VolumeMapper"),require("vtk.js/Sources/Rendering/Core/ColorTransferFunction"),require("vtk.js/Sources/Common/DataModel/PiecewiseFunction")):t.VTKViewport=e(t.react,t["vtk.js/Sources/macro"],t.cornerstone,t["vtk.js/Sources/Rendering/Core/Coordinate"],t["vtk.js/Sources/Rendering/Core/InteractorStyle/Constants"],t["vtk.js/Sources/Common/Core/Math"],t["vtk.js/Sources/Common/Core/MatrixBuilder"],t["vtk.js/Sources/Rendering/Misc/GenericRenderWindow"],t["vtk.js/Sources/Widgets/Core/WidgetManager"],t["vtk.js/Sources/Filters/General/PaintFilter"],t["vtk.js/Sources/Widgets/Widgets3D/PaintWidget"],t["vtk.js/Sources/Widgets/Core/WidgetManager/Constants"],t["vtk.js/Sources/Common/DataModel/ImageData"],t["vtk.js/Sources/Common/Core/DataArray"],t.cornerstoneTools,t["vtk.js/Sources/Rendering/Core/Renderer"],t["vtk.js/Sources/Interaction/Style/InteractorStyleManipulator"],t["vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballRotateManipulator"],t["vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballPanManipulator"],t["vtk.js/Sources/Interaction/Manipulators/MouseCameraTrackballZoomManipulator"],t["vtk.js/Sources/Interaction/Manipulators/MouseRangeManipulator"],t["vtk.js/Sources/Rendering/Core/Volume"],t["vtk.js/Sources/Rendering/Core/VolumeMapper"],t["vtk.js/Sources/Rendering/Core/ColorTransferFunction"],t["vtk.js/Sources/Common/DataModel/PiecewiseFunction"])}(this,function(t,e,n,r,a,i,o,s,u,c,d,l,f,h,p,g,m,v,w,b,y,M,S,k,C){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=58)}([function(t,e,n){t.exports=n(51)()},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){var r=n(46),a=n(47),i=n(26),o=n(48);t.exports=function(t){return r(t)||a(t)||i(t)||o()}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){t.exports=a},function(t,e){t.exports=i},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(49);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(50),a=n(24);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}},function(t,e,n){var r=n(43),a=n(44),i=n(26),o=n(45);t.exports=function(t,e){return r(t)||a(t,e)||i(t,e)||o()}},function(t,e){t.exports=o},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e){t.exports=s},function(t,e){t.exports=u},function(t,e){t.exports=c},function(t,e){t.exports=d},function(t,e){t.exports=l},function(t,e){t.exports=f},function(t,e){t.exports=h},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=p},function(t,e,n){var r=n(27);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=g},function(t,e){t.exports=m},function(t,e){t.exports=v},function(t,e){t.exports=w},function(t,e){t.exports=b},function(t,e){t.exports=y},function(t,e){t.exports=M},function(t,e){t.exports=S},function(t,e){t.exports=k},function(t,e){t.exports=C},,,,,,function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(27);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";var r=n(52);function a(){}function i(){}i.resetWarningCache=a,t.exports=function(){function t(t,e,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(54);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(56)(r,a);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(55)(!1)).push([t.i,":root {\n  --viewport-tag-padding: 20px;\n}\n\n.ViewportOverlay {\n  color: #9ccef9;\n}\n\n.ViewportOverlay .overlay-element {\n  position: absolute;\n  font-weight: 400;\n  text-shadow: 1px 1px black;\n  pointer-events: none;\n}\n\n.ViewportOverlay .top-left {\n  top: var(--viewport-tag-padding);\n  left: var(--viewport-tag-padding);\n}\n\n.ViewportOverlay .top-center {\n  top: var(--viewport-tag-padding);\n  padding-top: var(--viewport-tag-padding);\n  width: 100%;\n  text-align: center;\n}\n\n.ViewportOverlay .top-right {\n  top: var(--viewport-tag-padding);\n  right: var(--viewport-tag-padding);\n  text-align: right;\n}\n\n.ViewportOverlay .bottom-left {\n  bottom: var(--viewport-tag-padding);\n  left: var(--viewport-tag-padding);\n}\n\n.ViewportOverlay .bottom-right {\n  bottom: var(--viewport-tag-padding);\n  right: var(--viewport-tag-padding);\n  text-align: right;\n}\n\n.ViewportOverlay svg {\n  color: #9ccef9;\n  fill: #9ccef9;\n  stroke: #9ccef9;\n  background-color: transparent;\n  margin: 2px;\n  width: 18px;\n  height: 18px;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[n].concat(i).concat([a]).join("\n")}var o,s,u;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){var r,a,i={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),u=null,c=0,d=[],l=n(57);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=i[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(w(r.parts[o],e))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(w(r.parts[o],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},a=0;a<t.length;a++){var i=t[a],o=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=s(t.insertAt.before,n);n.insertBefore(e,a)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function w(t,e){var n,r,a,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var o=c++;n=u||(u=m(e)),r=M.bind(null,n,o,!1),a=M.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,a=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||i)&&(r=l(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,e),a=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return f(n,e),function(t){for(var r=[],a=0;a<n.length;a++){var o=n[a];(s=i[o.id]).refs--,r.push(s)}t&&f(h(t,e),e);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var b,y=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function M(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var a,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",function(){return it}),n.d(r,"clone",function(){return ot}),n.d(r,"copy",function(){return st}),n.d(r,"fromValues",function(){return ut}),n.d(r,"set",function(){return ct}),n.d(r,"identity",function(){return dt}),n.d(r,"transpose",function(){return lt}),n.d(r,"invert",function(){return ft}),n.d(r,"adjoint",function(){return ht}),n.d(r,"determinant",function(){return pt}),n.d(r,"multiply",function(){return gt}),n.d(r,"translate",function(){return mt}),n.d(r,"scale",function(){return vt}),n.d(r,"rotate",function(){return wt}),n.d(r,"rotateX",function(){return bt}),n.d(r,"rotateY",function(){return yt}),n.d(r,"rotateZ",function(){return Mt}),n.d(r,"fromTranslation",function(){return St}),n.d(r,"fromScaling",function(){return kt}),n.d(r,"fromRotation",function(){return Ct}),n.d(r,"fromXRotation",function(){return xt}),n.d(r,"fromYRotation",function(){return Tt}),n.d(r,"fromZRotation",function(){return Dt}),n.d(r,"fromRotationTranslation",function(){return Pt}),n.d(r,"fromQuat2",function(){return Rt}),n.d(r,"getTranslation",function(){return It}),n.d(r,"getScaling",function(){return Wt}),n.d(r,"getRotation",function(){return Ot}),n.d(r,"fromRotationTranslationScale",function(){return Et}),n.d(r,"fromRotationTranslationScaleOrigin",function(){return jt}),n.d(r,"fromQuat",function(){return Ut}),n.d(r,"frustum",function(){return qt}),n.d(r,"perspective",function(){return At}),n.d(r,"perspectiveFromFieldOfView",function(){return Nt}),n.d(r,"ortho",function(){return Ft}),n.d(r,"lookAt",function(){return Lt}),n.d(r,"targetTo",function(){return Vt}),n.d(r,"str",function(){return Bt}),n.d(r,"frob",function(){return Gt}),n.d(r,"add",function(){return Ht}),n.d(r,"subtract",function(){return Yt}),n.d(r,"multiplyScalar",function(){return _t}),n.d(r,"multiplyScalarAndAdd",function(){return Qt}),n.d(r,"exactEquals",function(){return zt}),n.d(r,"equals",function(){return Xt}),n.d(r,"mul",function(){return Kt}),n.d(r,"sub",function(){return Zt});var a={};n.r(a),n.d(a,"create",function(){return Jt}),n.d(a,"clone",function(){return $t}),n.d(a,"length",function(){return te}),n.d(a,"fromValues",function(){return ee}),n.d(a,"copy",function(){return ne}),n.d(a,"set",function(){return re}),n.d(a,"add",function(){return ae}),n.d(a,"subtract",function(){return ie}),n.d(a,"multiply",function(){return oe}),n.d(a,"divide",function(){return se}),n.d(a,"ceil",function(){return ue}),n.d(a,"floor",function(){return ce}),n.d(a,"min",function(){return de}),n.d(a,"max",function(){return le}),n.d(a,"round",function(){return fe}),n.d(a,"scale",function(){return he}),n.d(a,"scaleAndAdd",function(){return pe}),n.d(a,"distance",function(){return ge}),n.d(a,"squaredDistance",function(){return me}),n.d(a,"squaredLength",function(){return ve}),n.d(a,"negate",function(){return we}),n.d(a,"inverse",function(){return be}),n.d(a,"normalize",function(){return ye}),n.d(a,"dot",function(){return Me}),n.d(a,"cross",function(){return Se}),n.d(a,"lerp",function(){return ke}),n.d(a,"hermite",function(){return Ce}),n.d(a,"bezier",function(){return xe}),n.d(a,"random",function(){return Te}),n.d(a,"transformMat4",function(){return De}),n.d(a,"transformMat3",function(){return Pe}),n.d(a,"transformQuat",function(){return Re}),n.d(a,"rotateX",function(){return Ie}),n.d(a,"rotateY",function(){return We}),n.d(a,"rotateZ",function(){return Oe}),n.d(a,"angle",function(){return Ee}),n.d(a,"zero",function(){return je}),n.d(a,"str",function(){return Ue}),n.d(a,"exactEquals",function(){return qe}),n.d(a,"equals",function(){return Ae}),n.d(a,"sub",function(){return Fe}),n.d(a,"mul",function(){return Le}),n.d(a,"div",function(){return Ve}),n.d(a,"dist",function(){return Be}),n.d(a,"sqrDist",function(){return Ge}),n.d(a,"len",function(){return He}),n.d(a,"sqrLen",function(){return Ye}),n.d(a,"forEach",function(){return _e});var i={};n.r(i),n.d(i,"create",function(){return Xe}),n.d(i,"identity",function(){return Ke}),n.d(i,"setAxisAngle",function(){return Ze}),n.d(i,"getAxisAngle",function(){return Je}),n.d(i,"getAngle",function(){return $e}),n.d(i,"multiply",function(){return tn}),n.d(i,"rotateX",function(){return en}),n.d(i,"rotateY",function(){return nn}),n.d(i,"rotateZ",function(){return rn}),n.d(i,"calculateW",function(){return an}),n.d(i,"exp",function(){return on}),n.d(i,"ln",function(){return sn}),n.d(i,"pow",function(){return un}),n.d(i,"slerp",function(){return cn}),n.d(i,"random",function(){return dn}),n.d(i,"invert",function(){return ln}),n.d(i,"conjugate",function(){return fn}),n.d(i,"fromMat3",function(){return hn}),n.d(i,"fromEuler",function(){return pn}),n.d(i,"str",function(){return gn}),n.d(i,"clone",function(){return kn}),n.d(i,"fromValues",function(){return Cn}),n.d(i,"copy",function(){return xn}),n.d(i,"set",function(){return Tn}),n.d(i,"add",function(){return Dn}),n.d(i,"mul",function(){return Pn}),n.d(i,"scale",function(){return Rn}),n.d(i,"dot",function(){return In}),n.d(i,"lerp",function(){return Wn}),n.d(i,"length",function(){return On}),n.d(i,"len",function(){return En}),n.d(i,"squaredLength",function(){return jn}),n.d(i,"sqrLen",function(){return Un}),n.d(i,"normalize",function(){return qn}),n.d(i,"exactEquals",function(){return An}),n.d(i,"equals",function(){return Nn}),n.d(i,"rotationTo",function(){return Fn}),n.d(i,"sqlerp",function(){return Ln}),n.d(i,"setAxes",function(){return Vn});var o=n(16),s=n.n(o),u=n(14),c=n.n(u),d=n(3),l=n.n(d),f=n(8),h=n.n(f),p=n(11),g=n.n(p),m=n(24),v=n.n(m),w=n(12),b=n.n(w),y=n(13),M=n.n(y),S=n(7),k=n.n(S),C=n(4),x=n.n(C),T=n(1),D=n.n(T),P=n(0),R=n.n(P),I=n(17),W=n.n(I),O=n(28),E=n.n(O),j=n(18),U=n.n(j),q=n(2),A=n.n(q),N=n(10),F=n.n(N),L=n(15),V=n.n(L),B=n(29),G=n.n(B),H=n(30),Y=n.n(H),_=n(31),Q=n.n(_),z=n(32),X=n.n(z),K=n(33),Z=n.n(K),J=n(6),$=n.n(J),tt=n(9),et=n.n(tt),nt=1e-6,rt="undefined"!=typeof Float32Array?Float32Array:Array,at=Math.random;Math.PI;function it(){var t=new rt(16);return rt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ot(t){var e=new rt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function st(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ut(t,e,n,r,a,i,o,s,u,c,d,l,f,h,p,g){var m=new rt(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=a,m[5]=i,m[6]=o,m[7]=s,m[8]=u,m[9]=c,m[10]=d,m[11]=l,m[12]=f,m[13]=h,m[14]=p,m[15]=g,m}function ct(t,e,n,r,a,i,o,s,u,c,d,l,f,h,p,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=d,t[10]=l,t[11]=f,t[12]=h,t[13]=p,t[14]=g,t[15]=m,t}function dt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lt(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ft(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],d=e[8],l=e[9],f=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15],w=n*s-r*o,b=n*u-a*o,y=n*c-i*o,M=r*u-a*s,S=r*c-i*s,k=a*c-i*u,C=d*g-l*p,x=d*m-f*p,T=d*v-h*p,D=l*m-f*g,P=l*v-h*g,R=f*v-h*m,I=w*R-b*P+y*D+M*T-S*x+k*C;return I?(I=1/I,t[0]=(s*R-u*P+c*D)*I,t[1]=(a*P-r*R-i*D)*I,t[2]=(g*k-m*S+v*M)*I,t[3]=(f*S-l*k-h*M)*I,t[4]=(u*T-o*R-c*x)*I,t[5]=(n*R-a*T+i*x)*I,t[6]=(m*y-p*k-v*b)*I,t[7]=(d*k-f*y+h*b)*I,t[8]=(o*P-s*T+c*C)*I,t[9]=(r*T-n*P-i*C)*I,t[10]=(p*S-g*y+v*w)*I,t[11]=(l*y-d*S-h*w)*I,t[12]=(s*x-o*D-u*C)*I,t[13]=(n*D-r*x+a*C)*I,t[14]=(g*b-p*M-m*w)*I,t[15]=(d*M-l*b+f*w)*I,t):null}function ht(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],d=e[8],l=e[9],f=e[10],h=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return t[0]=s*(f*v-h*m)-l*(u*v-c*m)+g*(u*h-c*f),t[1]=-(r*(f*v-h*m)-l*(a*v-i*m)+g*(a*h-i*f)),t[2]=r*(u*v-c*m)-s*(a*v-i*m)+g*(a*c-i*u),t[3]=-(r*(u*h-c*f)-s*(a*h-i*f)+l*(a*c-i*u)),t[4]=-(o*(f*v-h*m)-d*(u*v-c*m)+p*(u*h-c*f)),t[5]=n*(f*v-h*m)-d*(a*v-i*m)+p*(a*h-i*f),t[6]=-(n*(u*v-c*m)-o*(a*v-i*m)+p*(a*c-i*u)),t[7]=n*(u*h-c*f)-o*(a*h-i*f)+d*(a*c-i*u),t[8]=o*(l*v-h*g)-d*(s*v-c*g)+p*(s*h-c*l),t[9]=-(n*(l*v-h*g)-d*(r*v-i*g)+p*(r*h-i*l)),t[10]=n*(s*v-c*g)-o*(r*v-i*g)+p*(r*c-i*s),t[11]=-(n*(s*h-c*l)-o*(r*h-i*l)+d*(r*c-i*s)),t[12]=-(o*(l*m-f*g)-d*(s*m-u*g)+p*(s*f-u*l)),t[13]=n*(l*m-f*g)-d*(r*m-a*g)+p*(r*f-a*l),t[14]=-(n*(s*m-u*g)-o*(r*m-a*g)+p*(r*u-a*s)),t[15]=n*(s*f-u*l)-o*(r*f-a*l)+d*(r*u-a*s),t}function pt(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],d=t[9],l=t[10],f=t[11],h=t[12],p=t[13],g=t[14],m=t[15];return(e*o-n*i)*(l*m-f*g)-(e*s-r*i)*(d*m-f*p)+(e*u-a*i)*(d*g-l*p)+(n*s-r*o)*(c*m-f*h)-(n*u-a*o)*(c*g-l*h)+(r*u-a*s)*(c*p-d*h)}function gt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],d=e[7],l=e[8],f=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],w=e[15],b=n[0],y=n[1],M=n[2],S=n[3];return t[0]=b*r+y*s+M*l+S*g,t[1]=b*a+y*u+M*f+S*m,t[2]=b*i+y*c+M*h+S*v,t[3]=b*o+y*d+M*p+S*w,b=n[4],y=n[5],M=n[6],S=n[7],t[4]=b*r+y*s+M*l+S*g,t[5]=b*a+y*u+M*f+S*m,t[6]=b*i+y*c+M*h+S*v,t[7]=b*o+y*d+M*p+S*w,b=n[8],y=n[9],M=n[10],S=n[11],t[8]=b*r+y*s+M*l+S*g,t[9]=b*a+y*u+M*f+S*m,t[10]=b*i+y*c+M*h+S*v,t[11]=b*o+y*d+M*p+S*w,b=n[12],y=n[13],M=n[14],S=n[15],t[12]=b*r+y*s+M*l+S*g,t[13]=b*a+y*u+M*f+S*m,t[14]=b*i+y*c+M*h+S*v,t[15]=b*o+y*d+M*p+S*w,t}function mt(t,e,n){var r,a,i,o,s,u,c,d,l,f,h,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],d=e[7],l=e[8],f=e[9],h=e[10],p=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=l,t[9]=f,t[10]=h,t[11]=p,t[12]=r*g+s*m+l*v+e[12],t[13]=a*g+u*m+f*v+e[13],t[14]=i*g+c*m+h*v+e[14],t[15]=o*g+d*m+p*v+e[15]),t}function vt(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wt(t,e,n,r){var a,i,o,s,u,c,d,l,f,h,p,g,m,v,w,b,y,M,S,k,C,x,T,D,P=r[0],R=r[1],I=r[2],W=Math.hypot(P,R,I);return W<nt?null:(P*=W=1/W,R*=W,I*=W,a=Math.sin(n),o=1-(i=Math.cos(n)),s=e[0],u=e[1],c=e[2],d=e[3],l=e[4],f=e[5],h=e[6],p=e[7],g=e[8],m=e[9],v=e[10],w=e[11],b=P*P*o+i,y=R*P*o+I*a,M=I*P*o-R*a,S=P*R*o-I*a,k=R*R*o+i,C=I*R*o+P*a,x=P*I*o+R*a,T=R*I*o-P*a,D=I*I*o+i,t[0]=s*b+l*y+g*M,t[1]=u*b+f*y+m*M,t[2]=c*b+h*y+v*M,t[3]=d*b+p*y+w*M,t[4]=s*S+l*k+g*C,t[5]=u*S+f*k+m*C,t[6]=c*S+h*k+v*C,t[7]=d*S+p*k+w*C,t[8]=s*x+l*T+g*D,t[9]=u*x+f*T+m*D,t[10]=c*x+h*T+v*D,t[11]=d*x+p*T+w*D,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function bt(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],d=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+c*r,t[5]=o*a+d*r,t[6]=s*a+l*r,t[7]=u*a+f*r,t[8]=c*a-i*r,t[9]=d*a-o*r,t[10]=l*a-s*r,t[11]=f*a-u*r,t}function yt(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[8],d=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-c*r,t[1]=o*a-d*r,t[2]=s*a-l*r,t[3]=u*a-f*r,t[8]=i*r+c*a,t[9]=o*r+d*a,t[10]=s*r+l*a,t[11]=u*r+f*a,t}function Mt(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[4],d=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+c*r,t[1]=o*a+d*r,t[2]=s*a+l*r,t[3]=u*a+f*r,t[4]=c*a-i*r,t[5]=d*a-o*r,t[6]=l*a-s*r,t[7]=f*a-u*r,t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ct(t,e,n){var r,a,i,o=n[0],s=n[1],u=n[2],c=Math.hypot(o,s,u);return c<nt?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=1-(a=Math.cos(e)),t[0]=o*o*i+a,t[1]=s*o*i+u*r,t[2]=u*o*i-s*r,t[3]=0,t[4]=o*s*i-u*r,t[5]=s*s*i+a,t[6]=u*s*i+o*r,t[7]=0,t[8]=o*u*i+s*r,t[9]=s*u*i-o*r,t[10]=u*u*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function xt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,u=a+a,c=i+i,d=r*s,l=r*u,f=r*c,h=a*u,p=a*c,g=i*c,m=o*s,v=o*u,w=o*c;return t[0]=1-(h+g),t[1]=l+w,t[2]=f-v,t[3]=0,t[4]=l-w,t[5]=1-(d+g),t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-(d+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Rt(t,e){var n=new rt(3),r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],d=e[7],l=r*r+a*a+i*i+o*o;return l>0?(n[0]=2*(s*o+d*r+u*i-c*a)/l,n[1]=2*(u*o+d*a+c*r-s*i)/l,n[2]=2*(c*o+d*i+s*a-u*r)/l):(n[0]=2*(s*o+d*r+u*i-c*a),n[1]=2*(u*o+d*a+c*r-s*i),n[2]=2*(c*o+d*i+s*a-u*r)),Pt(t,e,n),t}function It(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Wt(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],c=e[9],d=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(u,c,d),t}function Ot(t,e){var n=new rt(3);Wt(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],o=e[0]*r,s=e[1]*a,u=e[2]*i,c=e[4]*r,d=e[5]*a,l=e[6]*i,f=e[8]*r,h=e[9]*a,p=e[10]*i,g=o+d+p,m=0;return g>0?(m=2*Math.sqrt(g+1),t[3]=.25*m,t[0]=(l-h)/m,t[1]=(f-u)/m,t[2]=(s-c)/m):o>d&&o>p?(m=2*Math.sqrt(1+o-d-p),t[3]=(l-h)/m,t[0]=.25*m,t[1]=(s+c)/m,t[2]=(f+u)/m):d>p?(m=2*Math.sqrt(1+d-o-p),t[3]=(f-u)/m,t[0]=(s+c)/m,t[1]=.25*m,t[2]=(l+h)/m):(m=2*Math.sqrt(1+p-o-d),t[3]=(s-c)/m,t[0]=(f+u)/m,t[1]=(l+h)/m,t[2]=.25*m),t}function Et(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],u=a+a,c=i+i,d=o+o,l=a*u,f=a*c,h=a*d,p=i*c,g=i*d,m=o*d,v=s*u,w=s*c,b=s*d,y=r[0],M=r[1],S=r[2];return t[0]=(1-(p+m))*y,t[1]=(f+b)*y,t[2]=(h-w)*y,t[3]=0,t[4]=(f-b)*M,t[5]=(1-(l+m))*M,t[6]=(g+v)*M,t[7]=0,t[8]=(h+w)*S,t[9]=(g-v)*S,t[10]=(1-(l+p))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function jt(t,e,n,r,a){var i=e[0],o=e[1],s=e[2],u=e[3],c=i+i,d=o+o,l=s+s,f=i*c,h=i*d,p=i*l,g=o*d,m=o*l,v=s*l,w=u*c,b=u*d,y=u*l,M=r[0],S=r[1],k=r[2],C=a[0],x=a[1],T=a[2],D=(1-(g+v))*M,P=(h+y)*M,R=(p-b)*M,I=(h-y)*S,W=(1-(f+v))*S,O=(m+w)*S,E=(p+b)*k,j=(m-w)*k,U=(1-(f+g))*k;return t[0]=D,t[1]=P,t[2]=R,t[3]=0,t[4]=I,t[5]=W,t[6]=O,t[7]=0,t[8]=E,t[9]=j,t[10]=U,t[11]=0,t[12]=n[0]+C-(D*C+I*x+E*T),t[13]=n[1]+x-(P*C+W*x+j*T),t[14]=n[2]+T-(R*C+O*x+U*T),t[15]=1,t}function Ut(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,c=n*o,d=r*o,l=r*s,f=a*o,h=a*s,p=a*u,g=i*o,m=i*s,v=i*u;return t[0]=1-l-p,t[1]=d+v,t[2]=f-m,t[3]=0,t[4]=d-v,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=f+m,t[9]=h-g,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qt(t,e,n,r,a,i,o){var s=1/(n-e),u=1/(a-r),c=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*u,t[10]=(o+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*c,t[15]=0,t}function At(t,e,n,r,a){var i,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t}function Nt(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ft(t,e,n,r,a,i,o){var s=1/(e-n),u=1/(r-a),c=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=(o+i)*c,t[15]=1,t}function Lt(t,e,n,r){var a,i,o,s,u,c,d,l,f,h,p=e[0],g=e[1],m=e[2],v=r[0],w=r[1],b=r[2],y=n[0],M=n[1],S=n[2];return Math.abs(p-y)<nt&&Math.abs(g-M)<nt&&Math.abs(m-S)<nt?dt(t):(d=p-y,l=g-M,f=m-S,a=w*(f*=h=1/Math.hypot(d,l,f))-b*(l*=h),i=b*(d*=h)-v*f,o=v*l-w*d,(h=Math.hypot(a,i,o))?(a*=h=1/h,i*=h,o*=h):(a=0,i=0,o=0),s=l*o-f*i,u=f*a-d*o,c=d*i-l*a,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),t[0]=a,t[1]=s,t[2]=d,t[3]=0,t[4]=i,t[5]=u,t[6]=l,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(a*p+i*g+o*m),t[13]=-(s*p+u*g+c*m),t[14]=-(d*p+l*g+f*m),t[15]=1,t)}function Vt(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=r[0],u=r[1],c=r[2],d=a-n[0],l=i-n[1],f=o-n[2],h=d*d+l*l+f*f;h>0&&(d*=h=1/Math.sqrt(h),l*=h,f*=h);var p=u*f-c*l,g=c*d-s*f,m=s*l-u*d;return(h=p*p+g*g+m*m)>0&&(p*=h=1/Math.sqrt(h),g*=h,m*=h),t[0]=p,t[1]=g,t[2]=m,t[3]=0,t[4]=l*m-f*g,t[5]=f*p-d*m,t[6]=d*g-l*p,t[7]=0,t[8]=d,t[9]=l,t[10]=f,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function Bt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Gt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ht(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Yt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function _t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Xt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],d=t[8],l=t[9],f=t[10],h=t[11],p=t[12],g=t[13],m=t[14],v=t[15],w=e[0],b=e[1],y=e[2],M=e[3],S=e[4],k=e[5],C=e[6],x=e[7],T=e[8],D=e[9],P=e[10],R=e[11],I=e[12],W=e[13],O=e[14],E=e[15];return Math.abs(n-w)<=nt*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(r-b)<=nt*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-y)<=nt*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-M)<=nt*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-S)<=nt*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-k)<=nt*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(u-C)<=nt*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-x)<=nt*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-T)<=nt*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(l-D)<=nt*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(f-P)<=nt*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(h-R)<=nt*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(p-I)<=nt*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-W)<=nt*Math.max(1,Math.abs(g),Math.abs(W))&&Math.abs(m-O)<=nt*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-E)<=nt*Math.max(1,Math.abs(v),Math.abs(E))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Kt=gt,Zt=Yt;function Jt(){var t=new rt(3);return rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function $t(t){var e=new rt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function te(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function ee(t,e,n){var r=new rt(3);return r[0]=t,r[1]=e,r[2]=n,r}function ne(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function re(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ae(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ie(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function oe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function se(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ue(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ce(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function de(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function le(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function fe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function he(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function pe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function ge(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function me(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function ve(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function we(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function be(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ye(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Se(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2];return t[0]=a*u-i*s,t[1]=i*o-r*u,t[2]=r*s-a*o,t}function ke(t,e,n,r){var a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function Ce(t,e,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),d=o*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+a[0]*d,t[1]=e[1]*s+n[1]*u+r[1]*c+a[1]*d,t[2]=e[2]*s+n[2]*u+r[2]*c+a[2]*d,t}function xe(t,e,n,r,a,i){var o=1-i,s=o*o,u=i*i,c=s*o,d=3*i*s,l=3*u*o,f=u*i;return t[0]=e[0]*c+n[0]*d+r[0]*l+a[0]*f,t[1]=e[1]*c+n[1]*d+r[1]*l+a[1]*f,t[2]=e[2]*c+n[2]*d+r[2]*l+a[2]*f,t}function Te(t,e){e=e||1;var n=2*at()*Math.PI,r=2*at()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function De(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function Pe(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function Re(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],c=e[2],d=a*c-i*u,l=i*s-r*c,f=r*u-a*s,h=a*f-i*l,p=i*d-r*f,g=r*l-a*d,m=2*o;return d*=m,l*=m,f*=m,h*=2,p*=2,g*=2,t[0]=s+d+h,t[1]=u+l+p,t[2]=c+f+g,t}function Ie(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function We(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Oe(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ee(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],u=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+o*o+s*s),c=u&&Me(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function je(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ue(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ae(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=nt*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=nt*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=nt*Math.max(1,Math.abs(a),Math.abs(s))}var Ne,Fe=ie,Le=oe,Ve=se,Be=ge,Ge=me,He=te,Ye=ve,_e=(Ne=Jt(),function(t,e,n,r,a,i){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)Ne[0]=t[o],Ne[1]=t[o+1],Ne[2]=t[o+2],a(Ne,Ne,i),t[o]=Ne[0],t[o+1]=Ne[1],t[o+2]=Ne[2];return t});function Qe(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function ze(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}!function(){var t,e=(t=new rt(4),rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Xe(){var t=new rt(4);return rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ke(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ze(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Je(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>nt?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function $e(t,e){var n=In(t,e);return Math.acos(2*n*n-1)}function tn(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],d=n[3];return t[0]=r*d+o*s+a*c-i*u,t[1]=a*d+o*u+i*s-r*c,t[2]=i*d+o*c+r*u-a*s,t[3]=o*d-r*s-a*u-i*c,t}function en(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-r*s,t}function nn(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=a*u+o*s,t[2]=i*u+r*s,t[3]=o*u-a*s,t}function rn(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=a*u-r*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t}function an(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function on(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=Math.exp(i),u=o>0?s*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=s*Math.cos(o),t}function sn(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=o>0?Math.atan2(o,i)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function un(t,e,n){return sn(t,e),Rn(t,t,n),on(t,t),t}function cn(t,e,n,r){var a,i,o,s,u,c=e[0],d=e[1],l=e[2],f=e[3],h=n[0],p=n[1],g=n[2],m=n[3];return(i=c*h+d*p+l*g+f*m)<0&&(i=-i,h=-h,p=-p,g=-g,m=-m),1-i>nt?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-r)*a)/o,u=Math.sin(r*a)/o):(s=1-r,u=r),t[0]=s*c+u*h,t[1]=s*d+u*p,t[2]=s*l+u*g,t[3]=s*f+u*m,t}function dn(t){var e=at(),n=at(),r=at(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function ln(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-a*s,t[3]=i*s,t}function fn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function hn(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}function pn(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),d=Math.cos(r);return t[0]=i*u*d-o*s*c,t[1]=o*s*d+i*u*c,t[2]=o*u*c-i*s*d,t[3]=o*u*d+i*s*c,t}function gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var mn,vn,wn,bn,yn,Mn,Sn,kn=function(t){var e=new rt(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Cn=function(t,e,n,r){var a=new rt(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},xn=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Tn=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},Dn=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Pn=tn,Rn=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},In=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Wn=function(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t},On=Qe,En=On,jn=ze,Un=jn,qn=function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t},An=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Nn=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=nt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=nt*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=nt*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=nt*Math.max(1,Math.abs(i),Math.abs(c))},Fn=(mn=Jt(),vn=ee(1,0,0),wn=ee(0,1,0),function(t,e,n){var r=Me(e,n);return r<-.999999?(Se(mn,vn,e),He(mn)<1e-6&&Se(mn,wn,e),ye(mn,mn),Ze(t,mn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Se(mn,e,n),t[0]=mn[0],t[1]=mn[1],t[2]=mn[2],t[3]=1+r,qn(t,t))}),Ln=(bn=Xe(),yn=Xe(),function(t,e,n,r,a,i){return cn(bn,e,a,i),cn(yn,n,r,i),cn(t,bn,yn,2*i*(1-i)),t}),Vn=(Mn=new rt(9),rt!=Float32Array&&(Mn[1]=0,Mn[2]=0,Mn[3]=0,Mn[5]=0,Mn[6]=0,Mn[7]=0),Mn[0]=1,Mn[4]=1,Mn[8]=1,Sn=Mn,function(t,e,n,r){return Sn[0]=n[0],Sn[3]=n[1],Sn[6]=n[2],Sn[1]=r[0],Sn[4]=r[1],Sn[7]=r[2],Sn[2]=-e[0],Sn[5]=-e[1],Sn[8]=-e[2],qn(t,hn(t,Sn))});function Bn(t){return t*Math.PI/180}var Gn={VIEWPORT_ROTATED:"viewportRotated"};function Hn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Yn(t){if("number"!=typeof t||t!==Number(t)||!Number.isFinite(t))throw"Invalid number ".concat(t)}var _n=function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h()(this,t),x()(this,"_state",null),x()(this,"eventWindow",void 0),x()(this,"getEventWindow",function(){return n.eventWindow}),x()(this,"_rotate",function(t,e,o,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Yn(o),Yn(s),Yn(u);var c=[];a.cross(c,t,e),a.normalize(c,c);var d=t,l=[],f=[],h=r.create();if(r.rotate(h,h,Bn(s),d),r.rotate(h,h,Bn(o),c),a.transformMat4(l,e,h),a.transformMat4(f,t,h),0!==u){var p=i.create();i.setAxisAngle(p,l,Bn(-u)),i.normalize(p,p),a.transformQuat(f,f,p)}n._state.cache.sliceNormal=l,n._state.cache.viewUp=f;var g=new CustomEvent(Gn.VIEWPORT_ROTATED,{detail:{sliceNormal:l,sliceViewUp:f,dThetaX:o,dThetaY:s,dThetaZ:u},bubbles:!0,cancelable:!0});n.eventWindow.dispatchEvent(g)}),x()(this,"rotateAbsolute",function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n._rotate(n._state.viewUp,n._state.sliceNormal,t,e,r)}),x()(this,"rotateRelative",function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n._rotate(n._state.cache.viewUp,n._state.cache.sliceNormal,t,e,r)}),x()(this,"setOrientation",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1,0];n._state.sliceNormal=l()(t),n._state.viewUp=l()(e),n._state.cache.sliceNormal=l()(t),n._state.cache.viewUp=l()(e)}),x()(this,"getViewUp",function(){return n._state.viewUp}),x()(this,"getSliceNormal",function(){return n._state.sliceNormal}),x()(this,"getCurrentViewUp",function(){return n._state.cache.viewUp}),x()(this,"getCurrentSliceNormal",function(){return n._state.cache.sliceNormal}),x()(this,"getReadOnlyViewPort",function(){var t=JSON.parse(JSON.stringify(n._state));return Object.freeze(t),t}),this.eventWindow=e,null===this._state?this._state={viewUp:[0,1,0],sliceNormal:[0,0,1]}:this._state=JSON.parse(JSON.stringify(o)),this._state.cache=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(e){x()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this._state)},Qn=et.a.States;function zn(t,e){e.classHierarchy.push("vtkInteractorStyleMPRSlice"),e.trackballManipulator=Y.a.newInstance({button:1}),e.panManipulator=Q.a.newInstance({button:2}),e.zoomManipulator=X.a.newInstance({button:3}),e.scrollManipulator=Z.a.newInstance({scrollEnabled:!0,dragEnabled:!1});var n={sliceNormal:[0,0,0],sliceRange:[0,0],sliceCenter:[]};function r(){var n=t.getSliceRange();e.scrollManipulator.removeScrollListener(),e.scrollManipulator.setScrollListener(n[0],n[1],1,t.getSlice,t.scrollToSlice)}function a(t){o(t.detail.sliceNormal),i(t.detail.sliceViewUp)}function i(t){var n=e.interactor.getCurrentRenderer().getActiveCamera();n.setViewUp.apply(n,l()(t))}function o(n){var r=e.interactor.getCurrentRenderer().getActiveCamera(),a=l()(n);if(e.volumeActor){F.a.normalize(a);var i=r.getFocalPoint(),o=r.getDistance(),s=r.getViewAngle();if(!function(t){var e=t.getDistance();return"number"==typeof e&&e===Number(e)&&Number.isFinite(e)}(r)){var u=e.volumeActor.getMapper().getBounds(),c=Math.sqrt(F.a.distance2BetweenPoints([u[0],u[2],u[4]],[u[1],u[3],u[5]]));i=[(u[0]+u[1])/2,(u[2]+u[3])/2,(u[4]+u[5])/2],s=90,o=c/(2*Math.tan(s/360*Math.PI))}var d=[i[0]-a[0]*o,i[1]-a[1]*o,i[2]-a[2]*o];r.setPosition.apply(r,d),r.setDistance(o),r.setDirectionOfProjection.apply(r,l()(a)),r.setViewAngle(s),r.setThicknessFromFocalPoint(e.slabThickness),t.setCenterOfRotation(i)}}t.setViewport=function(t){e.viewportData&&e.viewportData.getEventWindow().removeEventListener(Gn.VIEWPORT_ROTATED,a);e.viewportData=t,e.scrollManipulator.setViewportData&&e.scrollManipulator.setViewportData(t),t&&(o(t.getCurrentSliceNormal()),i(t.getCurrentViewUp()),t.getEventWindow().addEventListener(Gn.VIEWPORT_ROTATED,a))},t.getViewport=function(){return e.viewportData};var s=null,u=null,c=t.setInteractor;function d(){var n=e.apis,r=e.apiIndex;if(n&&n[r]&&"VIEW2D"===n[r].type){t.startPan();var a=n[r];a.svgWidgets.crosshairsWidget.updateCrosshairForApi(a)}}t.setInteractor=function(n){if(c(n),s&&(s.unsubscribe(),s=null),u&&(u.unsubscribe(),u=null),n){var a=n.getCurrentRenderer().getActiveCamera();s=a.onModified(function(){r(),t.modified()}),u=n.onAnimation(function(){a.setThicknessFromFocalPoint(e.slabThickness)});var i=e.interactor.getContainer();t.setViewport(new _n(i))}else t.setViewport(null)},t.handleMiddleButtonPress=A.a.chain(t.handleMiddleButtonPress,d),t.handleRightButtonPress=A.a.chain(t.handleRightButtonPress,d);var f=t.handleMouseMove;function h(n){if(e.state===Qn.IS_PAN){t.endPan();var r=e.apis[e.apiIndex];r.svgWidgets.crosshairsWidget.updateCrosshairForApi(r)}n()}t.handleMouseMove=function(t){if(f&&f(t),e.state===Qn.IS_PAN){var n=e.apis[e.apiIndex];n.svgWidgets.crosshairsWidget.updateCrosshairForApi(n)}},t.superHandleMiddleButtonRelease=t.handleMiddleButtonRelease,t.handleMiddleButtonRelease=function(){h(t.superHandleMiddleButtonRelease)},t.superHandleRightButtonRelease=t.handleRightButtonRelease,t.handleRightButtonRelease=function(){h(t.superHandleRightButtonRelease)},t.setVolumeActor=function(n){e.volumeActor=n;var a=e.interactor.getCurrentRenderer().getActiveCamera();if(n){a.setFreezeFocalPoint(!0);var s=t.getViewport();s&&(o(s.getCurrentSliceNormal()),i(s.getCurrentViewUp())),r()}else a.setFreezeFocalPoint(!1)},t.getSlice=function(){var n=e.interactor.getCurrentRenderer().getActiveCamera(),r=t.getSliceNormal(),a=V.a.buildFromDegree().identity().rotateFromDirections(r,[1,0,0]),i=n.getFocalPoint();return a.apply(i),i[0]},t.scrollToSlice=function(e){var n=new CustomEvent("vtkscrollevent",{detail:{uid:t.getUid()}});window.dispatchEvent(n);var r=t.setSlice(e),a=t.getOnScroll();a&&a({slicePoint:r})},e.onScroll=function(){var t=e.apis,n=e.apiIndex;if(t&&t[n]&&"VIEW2D"===t[n].type){var r=t[n];if(!r.svgWidgets.crosshairsWidget)return;var a=r.genericRenderWindow.getRenderer(),i=r.get("cachedCrosshairWorldPosition");if(void 0===i)return;var o=$.a.newInstance();o.setCoordinateSystemToWorld(),o.setValue.apply(o,l()(i));var s=o.getComputedDoubleDisplayValue(a),u=$.a.newInstance();u.setCoordinateSystemToDisplay(),u.setValue(s[0],s[1],0);for(var c=u.getComputedWorldValue(a),d=a.getActiveCamera().getDirectionOfProjection(),f=r.getSlabThickness()/2,h=0;h<c.length;h++)c[h]+=f*d[h];r.svgWidgets.crosshairsWidget.moveCrosshairs(c,t,n)}},t.setSlice=function(r){var a=e.interactor.getCurrentRenderer().getActiveCamera();if(e.volumeActor){var i=t.getSliceRange(),o=e.volumeActor.getMapper().getBounds(),s=function(t,e,n){return t<e?e:t>n?n:t}.apply(void 0,[r].concat(l()(i))),u=[0,0,0];if(n.sliceCenter.length){var c=a.getFocalPoint();F.a.subtract(c,n.sliceCenter,u)}var d=[(o[0]+o[1])/2,(o[2]+o[3])/2,(o[4]+o[5])/2],f=a.getDistance(),h=a.getDirectionOfProjection();F.a.normalize(h);var p=(i[1]+i[0])/2,g=[d[0]-h[0]*p,d[1]-h[1]*p,d[2]-h[2]*p],m=[g[0]+h[0]*s,g[1]+h[1]*s,g[2]+h[2]*s];n.sliceCenter=[].concat(m);var v=[m[0]-h[0]*f,m[1]-h[1]*f,m[2]-h[2]*f];return F.a.add(m,u,m),F.a.add(v,u,v),a.setPosition.apply(a,v),a.setFocalPoint.apply(a,m),m}},t.getSliceRange=function(){if(e.volumeActor){var r=t.getSliceNormal();if(r[0]===n.sliceNormal[0]&&r[1]===n.sliceNormal[1]&&r[2]===n.sliceNormal[2])return n.sliceRange;var a=function(t){return[[t[0],t[2],t[4]],[t[0],t[2],t[5]],[t[0],t[3],t[4]],[t[0],t[3],t[5]],[t[1],t[2],t[4]],[t[1],t[2],t[5]],[t[1],t[3],t[4]],[t[1],t[3],t[5]]]}(e.volumeActor.getMapper().getBounds()),i=V.a.buildFromDegree().identity().rotateFromDirections(r,[1,0,0]);a.forEach(function(t){return i.apply(t)});for(var o=1/0,s=-1/0,u=0;u<8;u++){var c=a[u][0];c>s&&(s=c),c<o&&(o=c)}return n.sliceNormal=r,n.sliceRange=[o,s],n.sliceRange}return[0,0]},t.getSliceNormal=function(){return e.volumeActor&&e.interactor?e.interactor.getCurrentRenderer().getActiveCamera().getDirectionOfProjection():[0,0,0]},t.setSliceNormal=function(){for(var e=t.getViewport(),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e&&e.setOrientation(r,e.getCurrentViewUp()),o(r)},t.getViewUp=function(){return e.volumeActor&&e.interactor?e.interactor.getCurrentRenderer().getActiveCamera().getViewUp():[0,0,0]},t.setViewUp=function(){for(var e=t.getViewport(),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e&&e.setOrientation(e.getSliceNormal(),r),i(r)},t.setSliceOrientation=function(e,n){var r=t.getViewport();r&&r.setOrientation(e,n),o(e),i(n)},t.setSlabThickness=function(t){e.slabThickness=t,e.interactor.getCurrentRenderer().getActiveCamera().setThicknessFromFocalPoint(t)},t.setUid=function(t){e.uid=t},t.getUid=function(){return e.uid},t.removeAllMouseManipulators(),t.addMouseManipulator(e.trackballManipulator),t.addMouseManipulator(e.panManipulator),t.addMouseManipulator(e.zoomManipulator),t.addMouseManipulator(e.scrollManipulator),r()}var Xn={slabThickness:.1,uid:""};function Kn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Xn,n),G.a.extend(t,e,n),A.a.setGet(t,e,["onScroll"]),A.a.get(t,e,["slabThickness","volumeActor","apis","apiIndex"]),zn(t,e)}var Zn=A.a.newInstance(Kn,"vtkInteractorStyleMPRSlice"),Jn=Object.assign({newInstance:Zn,extend:Kn});var $n=n(19),tr=n.n($n),er=n(20),nr=n.n(er),rr=A.a.vtkErrorMacro,ar=1;function ir(t,e){var n,r;e.classHierarchy.push("vtkSVGWidgetManager"),e.widgetId="vtkSVGWidgetManager-".concat(ar++),e.svgRootNode=(n=e.widgetId,(r=document.createElement("svg")).setAttribute("id",n),r.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; height: 100%;"),r.setAttribute("version","1.1"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r),e.widgets=[],t.setRenderer=function(n){var r=n.getRenderWindow().getInteractor();e.openGLRenderWindow=r.getView(),t.setContainer(e.openGLRenderWindow.getReferenceByName("el"))},t.setContainer=function(n){e.container&&e.container!==n&&(e.svgRootNode.parentNode===e.container?e.container.removeChild(e.svgRootNode):rr("Error: SVG parent node does not match container")),e.container!==n&&(e.container=n,e.container&&e.container.appendChild(e.svgRootNode),t.modified())},t.getSize=function(){return e.openGLRenderWindow.getSize()},t.addWidget=function(n){-1===e.widgets.indexOf(n)&&e.widgets.push(n),t.render()},t.removeWidget=function(n){var r=n.getWidgetId(),a=e.svgRootNode.querySelector("#".concat(r));e.svgRootNode.removeChild(a);var i=e.widgets.indexOf(n);-1!==i&&e.widgets.splice(i,1),t.render()},t.render=function(){e.svgRootNode&&requestAnimationFrame(function(){var n=e.scale,r=t.getSize(),a=c()(r,2),i=a[0],o=a[1];e.svgRootNode.setAttribute("viewBox","0 0 ".concat(i*n," ").concat(o*n)),e.svgRootNode.setAttribute("width","".concat(i*n)),e.svgRootNode.setAttribute("height","".concat(o*n));for(var s=0;s<e.widgets.length;s++)e.widgets[s].render(e.svgRootNode,e.scale)})}}var or={scale:.5};function sr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,or,n),A.a.obj(t,e),A.a.get(t,e,["container"]),A.a.setGet(t,e,["scale"]),ir(t,e)}var ur={newInstance:A.a.newInstance(sr,"vtkSVGWidgetManager"),extend:sr};var cr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function dr(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var lr={date:dr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:dr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:dr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},fr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hr(t){return function(e,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=a.width?String(a.width):i;r=t.formattingValues[o]||t.formattingValues[i]}else{var s=t.defaultWidth,u=a.width?String(a.width):t.defaultWidth;r=t.values[u]||t.values[s]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function pr(t){return function(e,n){var r=String(e),a=n||{},i=a.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;var u,c=s[0],d=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(d)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}(d,function(t){return t.test(c)}):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(d,function(t){return t.test(c)}),u=t.valueCallback?t.valueCallback(u):u,{value:u=a.valueCallback?a.valueCallback(u):u,rest:r.slice(c.length)}}}var gr,mr={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof cr[t]?cr[t]:1===e?cr[t].one:cr[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:lr,formatRelative:function(t,e,n,r){return fr[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:hr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:hr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(gr={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},a=n.match(gr.matchPattern);if(!a)return null;var i=a[0],o=n.match(gr.parsePattern);if(!o)return null;var s=gr.valueCallback?gr.valueCallback(o[0]):o[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(i.length)}}),era:pr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:pr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:pr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:pr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:pr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function vr(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function wr(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function br(t){wr(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function yr(t,e){return wr(2,arguments),function(t,e){wr(2,arguments);var n=br(t).getTime(),r=vr(e);return new Date(n+r)}(t,-vr(e))}function Mr(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e=e||{})e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Sr(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function kr(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var Cr={p:kr,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return Sr(t,e);switch(a){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Sr(a,e)).replace("{{time}}",kr(i,e))}},xr=6e4;function Tr(t){return t.getTime()%xr}function Dr(t){var e=new Date(t.getTime()),n=Math.ceil(e.getTimezoneOffset());e.setSeconds(0,0);var r=n>0?(xr+Tr(e))%xr:Tr(e);return n*xr+r}var Pr=["D","DD"],Rr=["YY","YYYY"];function Ir(t){return-1!==Pr.indexOf(t)}function Wr(t){return-1!==Rr.indexOf(t)}function Or(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}function Er(t,e){wr(1,arguments);var n=e||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,i=null==a?0:vr(a),o=null==n.weekStartsOn?i:vr(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=br(t),u=s.getUTCDay(),c=(u<o?7:0)+u-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function jr(t,e){wr(1,arguments);var n=br(t,e),r=n.getUTCFullYear(),a=e||{},i=a.locale,o=i&&i.options&&i.options.firstWeekContainsDate,s=null==o?1:vr(o),u=null==a.firstWeekContainsDate?s:vr(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var d=Er(c,e),l=new Date(0);l.setUTCFullYear(r,0,u),l.setUTCHours(0,0,0,0);var f=Er(l,e);return n.getTime()>=d.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function Ur(t,e,n){wr(2,arguments);var r=n||{},a=r.locale,i=a&&a.options&&a.options.weekStartsOn,o=null==i?0:vr(i),s=null==r.weekStartsOn?o:vr(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=br(t),c=vr(e),d=((c%7+7)%7<s?7:0)+c-u.getUTCDay();return u.setUTCDate(u.getUTCDate()+d),u}function qr(t){wr(1,arguments);var e=br(t),n=e.getUTCDay(),r=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function Ar(t){wr(1,arguments);var e=br(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=qr(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=qr(i);return e.getTime()>=a.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}var Nr=6048e5;function Fr(t){wr(1,arguments);var e=br(t),n=qr(e).getTime()-function(t){wr(1,arguments);var e=Ar(t),n=new Date(0);return n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0),qr(n)}(e).getTime();return Math.round(n/Nr)+1}var Lr=6048e5;function Vr(t,e){wr(1,arguments);var n=br(t),r=Er(n,e).getTime()-function(t,e){wr(1,arguments);var n=e||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:vr(a),o=null==n.firstWeekContainsDate?i:vr(n.firstWeekContainsDate),s=jr(t,e),u=new Date(0);return u.setUTCFullYear(s,0,o),u.setUTCHours(0,0,0,0),Er(u,e)}(n,e).getTime();return Math.round(r/Lr)+1}var Br=36e5,Gr=6e4,Hr=1e3,Yr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},_r=/^([+-])(\d{2})(\d{2})?|Z/,Qr=/^([+-])(\d{2})(\d{2})|Z/,zr=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Xr=/^([+-])(\d{2}):(\d{2})|Z/,Kr=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Zr(t,e,n){var r=e.match(t);if(!r)return null;var a=parseInt(r[0],10);return{value:n?n(a):a,rest:e.slice(r[0].length)}}function Jr(t,e){var n=e.match(t);if(!n)return null;if("Z"===n[0])return{value:0,rest:e.slice(1)};var r="+"===n[1]?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*Br+i*Gr+o*Hr),rest:e.slice(n[0].length)}}function $r(t,e){return Zr(Yr.anyDigitsSigned,t,e)}function ta(t,e,n){switch(t){case 1:return Zr(Yr.singleDigit,e,n);case 2:return Zr(Yr.twoDigits,e,n);case 3:return Zr(Yr.threeDigits,e,n);case 4:return Zr(Yr.fourDigits,e,n);default:return Zr(new RegExp("^\\d{1,"+t+"}"),e,n)}}function ea(t,e,n){switch(t){case 1:return Zr(Yr.singleDigitSigned,e,n);case 2:return Zr(Yr.twoDigitsSigned,e,n);case 3:return Zr(Yr.threeDigitsSigned,e,n);case 4:return Zr(Yr.fourDigitsSigned,e,n);default:return Zr(new RegExp("^-?\\d{1,"+t+"}"),e,n)}}function na(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ra(t,e){var n,r=e>0,a=r?e:1-e;if(a<=50)n=t||100;else{var i=a+50;n=t+100*Math.floor(i/100)-(t>=i%100?100:0)}return r?n:1-n}var aa=[31,28,31,30,31,30,31,31,30,31,30,31],ia=[31,29,31,30,31,30,31,31,30,31,30,31];function oa(t){return t%400==0||t%4==0&&t%100!=0}var sa={G:{priority:140,parse:function(t,e,n,r){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}},set:function(t,e,n,r){return e.era=n,t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(t,e,n,r){var a=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return ta(4,t,a);case"yo":return n.ordinalNumber(t,{unit:"year",valueCallback:a});default:return ta(e.length,t,a)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var a=t.getUTCFullYear();if(n.isTwoDigitYear){var i=ra(n.year,a);return t.setUTCFullYear(i,0,1),t.setUTCHours(0,0,0,0),t}var o="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(t,e,n,r){var a=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return ta(4,t,a);case"Yo":return n.ordinalNumber(t,{unit:"year",valueCallback:a});default:return ta(e.length,t,a)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var a=jr(t,r);if(n.isTwoDigitYear){var i=ra(n.year,a);return t.setUTCFullYear(i,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Er(t,r)}var o="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(o,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Er(t,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(t,e,n,r){return ea("R"===e?4:e.length,t)},set:function(t,e,n,r){var a=new Date(0);return a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0),qr(a)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(t,e,n,r){return ea("u"===e?4:e.length,t)},set:function(t,e,n,r){return t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(t,e,n,r){switch(e){case"Q":case"QQ":return ta(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(t,e,n,r){switch(e){case"q":case"qq":return ta(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(t,e,n,r){var a=function(t){return t-1};switch(e){case"M":return Zr(Yr.month,t,a);case"MM":return ta(2,t,a);case"Mo":return n.ordinalNumber(t,{unit:"month",valueCallback:a});case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(t,e,n,r){var a=function(t){return t-1};switch(e){case"L":return Zr(Yr.month,t,a);case"LL":return ta(2,t,a);case"Lo":return n.ordinalNumber(t,{unit:"month",valueCallback:a});case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(t,e,n,r){switch(e){case"w":return Zr(Yr.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return Er(function(t,e,n){wr(2,arguments);var r=br(t),a=vr(e),i=Vr(r,n)-a;return r.setUTCDate(r.getUTCDate()-7*i),r}(t,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(t,e,n,r){switch(e){case"I":return Zr(Yr.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return qr(function(t,e){wr(2,arguments);var n=br(t),r=vr(e),a=Fr(n)-r;return n.setUTCDate(n.getUTCDate()-7*a),n}(t,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(t,e,n,r){switch(e){case"d":return Zr(Yr.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return ta(e.length,t)}},validate:function(t,e,n){var r=oa(t.getUTCFullYear()),a=t.getUTCMonth();return r?e>=1&&e<=ia[a]:e>=1&&e<=aa[a]},set:function(t,e,n,r){return t.setUTCDate(n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(t,e,n,r){switch(e){case"D":case"DD":return Zr(Yr.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return ta(e.length,t)}},validate:function(t,e,n){return oa(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,n,r){return t.setUTCMonth(0,n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(t,e,n,r){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=Ur(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(t,e,n,r){var a=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return ta(e.length,t,a);case"eo":return n.ordinalNumber(t,{unit:"day",valueCallback:a});case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=Ur(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(t,e,n,r){var a=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return ta(e.length,t,a);case"co":return n.ordinalNumber(t,{unit:"day",valueCallback:a});case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=Ur(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(t,e,n,r){var a=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return ta(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return n.day(t,{width:"abbreviated",context:"formatting",valueCallback:a})||n.day(t,{width:"short",context:"formatting",valueCallback:a})||n.day(t,{width:"narrow",context:"formatting",valueCallback:a});case"iiiii":return n.day(t,{width:"narrow",context:"formatting",valueCallback:a});case"iiiiii":return n.day(t,{width:"short",context:"formatting",valueCallback:a})||n.day(t,{width:"narrow",context:"formatting",valueCallback:a});case"iiii":default:return n.day(t,{width:"wide",context:"formatting",valueCallback:a})||n.day(t,{width:"abbreviated",context:"formatting",valueCallback:a})||n.day(t,{width:"short",context:"formatting",valueCallback:a})||n.day(t,{width:"narrow",context:"formatting",valueCallback:a})}},validate:function(t,e,n){return e>=1&&e<=7},set:function(t,e,n,r){return(t=function(t,e){wr(2,arguments);var n=vr(e);n%7==0&&(n-=7);var r=br(t),a=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+a),r}(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(t,e,n,r){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(na(n),0,0,0),t},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(t,e,n,r){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(na(n),0,0,0),t},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(t,e,n,r){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(na(n),0,0,0),t},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(t,e,n,r){switch(e){case"h":return Zr(Yr.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=12},set:function(t,e,n,r){var a=t.getUTCHours()>=12;return a&&n<12?t.setUTCHours(n+12,0,0,0):a||12!==n?t.setUTCHours(n,0,0,0):t.setUTCHours(0,0,0,0),t},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(t,e,n,r){switch(e){case"H":return Zr(Yr.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=23},set:function(t,e,n,r){return t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(t,e,n,r){switch(e){case"K":return Zr(Yr.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.getUTCHours()>=12&&n<12?t.setUTCHours(n+12,0,0,0):t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(t,e,n,r){switch(e){case"k":return Zr(Yr.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=24},set:function(t,e,n,r){var a=n<=24?n%24:n;return t.setUTCHours(a,0,0,0),t},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(t,e,n,r){switch(e){case"m":return Zr(Yr.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCMinutes(n,0,0),t},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(t,e,n,r){switch(e){case"s":return Zr(Yr.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return ta(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCSeconds(n,0),t},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(t,e,n,r){return ta(e.length,t,function(t){return Math.floor(t*Math.pow(10,3-e.length))})},set:function(t,e,n,r){return t.setUTCMilliseconds(n),t},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(t,e,n,r){switch(e){case"X":return Jr(_r,t);case"XX":return Jr(Qr,t);case"XXXX":return Jr(zr,t);case"XXXXX":return Jr(Kr,t);case"XXX":default:return Jr(Xr,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(t,e,n,r){switch(e){case"x":return Jr(_r,t);case"xx":return Jr(Qr,t);case"xxxx":return Jr(zr,t);case"xxxxx":return Jr(Kr,t);case"xxx":default:return Jr(Xr,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(t,e,n,r){return $r(t)},set:function(t,e,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(t,e,n,r){return $r(t)},set:function(t,e,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},ua=10,ca=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,da=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,la=/^'([^]*?)'?$/,fa=/''/g,ha=/\S/,pa=/[a-zA-Z]/;function ga(t,e,n,r){wr(3,arguments);var a=String(t),i=String(e),o=r||{},s=o.locale||mr;if(!s.match)throw new RangeError("locale must contain match property");var u=s.options&&s.options.firstWeekContainsDate,c=null==u?1:vr(u),d=null==o.firstWeekContainsDate?c:vr(o.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=s.options&&s.options.weekStartsOn,f=null==l?0:vr(l),h=null==o.weekStartsOn?f:vr(o.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===i)return""===a?br(n):new Date(NaN);var p,g={firstWeekContainsDate:d,weekStartsOn:h,locale:s},m=[{priority:ua,subPriority:-1,set:ma,index:0}],v=i.match(da).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,Cr[e])(t,s.formatLong,g):t}).join("").match(ca),w=[];for(p=0;p<v.length;p++){var b=v[p];!o.useAdditionalWeekYearTokens&&Wr(b)&&Or(b,i,t),!o.useAdditionalDayOfYearTokens&&Ir(b)&&Or(b,i,t);var y=b[0],M=sa[y];if(M){var S=M.incompatibleTokens;if(Array.isArray(S)){for(var k=void 0,C=0;C<w.length;C++){var x=w[C].token;if(-1!==S.indexOf(x)||x===y){k=w[C];break}}if(k)throw new RangeError("The format string mustn't contain `".concat(k.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===M.incompatibleTokens&&w.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));w.push({token:y,fullToken:b});var T=M.parse(a,b,s.match,g);if(!T)return new Date(NaN);m.push({priority:M.priority,subPriority:M.subPriority||0,set:M.set,validate:M.validate,value:T.value,index:m.length}),a=T.rest}else{if(y.match(pa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if("''"===b?b="'":"'"===y&&(b=b.match(la)[1].replace(fa,"'")),0!==a.indexOf(b))return new Date(NaN);a=a.slice(b.length)}}if(a.length>0&&ha.test(a))return new Date(NaN);var D=m.map(function(t){return t.priority}).sort(function(t,e){return e-t}).filter(function(t,e,n){return n.indexOf(t)===e}).map(function(t){return m.filter(function(e){return e.priority===t}).sort(function(t,e){return e.subPriority-t.subPriority})}).map(function(t){return t[0]}),P=br(n);if(isNaN(P))return new Date(NaN);var R=yr(P,Dr(P)),I={};for(p=0;p<D.length;p++){var W=D[p];if(W.validate&&!W.validate(R,W.value,g))return new Date(NaN);var O=W.set(R,I,W.value,g);O[0]?(R=O[0],Mr(I,O[1])):R=O}return R}function ma(t,e){if(e.timestampIsSet)return t;var n=new Date(0);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}function va(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var wa={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return va("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):va(n+1,2)},d:function(t,e){return va(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return va(t.getUTCHours()%12||12,e.length)},H:function(t,e){return va(t.getUTCHours(),e.length)},m:function(t,e){return va(t.getUTCMinutes(),e.length)},s:function(t,e){return va(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return va(Math.floor(r*Math.pow(10,n-3)),e.length)}},ba=864e5;var ya="midnight",Ma="noon",Sa="morning",ka="afternoon",Ca="evening",xa="night";function Ta(t,e){var n=t>0?"-":"+",r=Math.abs(t),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var o=e||"";return n+String(a)+o+va(i,2)}function Da(t,e){return t%60==0?(t>0?"-":"+")+va(Math.abs(t)/60,2):Pa(t,e)}function Pa(t,e){var n=e||"",r=t>0?"-":"+",a=Math.abs(t);return r+va(Math.floor(a/60),2)+n+va(a%60,2)}var Ra={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return wa.y(t,e)},Y:function(t,e,n,r){var a=jr(t,r),i=a>0?a:1-a;return"YY"===e?va(i%100,2):"Yo"===e?n.ordinalNumber(i,{unit:"year"}):va(i,e.length)},R:function(t,e){return va(Ar(t),e.length)},u:function(t,e){return va(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return va(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return va(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return wa.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return va(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var a=Vr(t,r);return"wo"===e?n.ordinalNumber(a,{unit:"week"}):va(a,e.length)},I:function(t,e,n){var r=Fr(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):va(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):wa.d(t,e)},D:function(t,e,n){var r=function(t){wr(1,arguments);var e=br(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=n-e.getTime();return Math.floor(r/ba)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):va(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var a=t.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return va(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var a=t.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return va(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),a=0===r?7:r;switch(e){case"i":return String(a);case"ii":return va(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,a=t.getUTCHours();switch(r=12===a?Ma:0===a?ya:a/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,a=t.getUTCHours();switch(r=a>=17?Ca:a>=12?ka:a>=4?Sa:xa,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return wa.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):wa.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):va(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):va(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):wa.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):wa.s(t,e)},S:function(t,e){return wa.S(t,e)},X:function(t,e,n,r){var a=(r._originalDate||t).getTimezoneOffset();if(0===a)return"Z";switch(e){case"X":return Da(a);case"XXXX":case"XX":return Pa(a);case"XXXXX":case"XXX":default:return Pa(a,":")}},x:function(t,e,n,r){var a=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Da(a);case"xxxx":case"xx":return Pa(a);case"xxxxx":case"xxx":default:return Pa(a,":")}},O:function(t,e,n,r){var a=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ta(a,":");case"OOOO":default:return"GMT"+Pa(a,":")}},z:function(t,e,n,r){var a=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ta(a,":");case"zzzz":default:return"GMT"+Pa(a,":")}},t:function(t,e,n,r){var a=r._originalDate||t;return va(Math.floor(a.getTime()/1e3),e.length)},T:function(t,e,n,r){return va((r._originalDate||t).getTime(),e.length)}},Ia=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oa=/^'([^]*?)'?$/,Ea=/''/g,ja=/[a-zA-Z]/;function Ua(t,e,n){wr(2,arguments);var r=String(e),a=n||{},i=a.locale||mr,o=i.options&&i.options.firstWeekContainsDate,s=null==o?1:vr(o),u=null==a.firstWeekContainsDate?s:vr(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,d=null==c?0:vr(c),l=null==a.weekStartsOn?d:vr(a.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var f=br(t);if(!function(t){wr(1,arguments);var e=br(t);return!isNaN(e)}(f))throw new RangeError("Invalid time value");var h=yr(f,Dr(f)),p={firstWeekContainsDate:u,weekStartsOn:l,locale:i,_originalDate:f};return r.match(Wa).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,Cr[e])(t,i.formatLong,p):t}).join("").match(Ia).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(Oa)[1].replace(Ea,"'");var o=Ra[r];if(o)return!a.useAdditionalWeekYearTokens&&Wr(n)&&Or(n,e,t),!a.useAdditionalDayOfYearTokens&&Ir(n)&&Or(n,e,t),o(h,n,i.localize,p);if(r.match(ja))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")}var qa=function(t){if(t)return t.replace("^",", ").replace(/\^/g," ").trim()},Aa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM D, YYYY";if(t)try{return Ua(ga(t,"yyyyMMdd",new Date),e)}catch(t){}},Na=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm:ss";if(t){try{return Ua(ga(t.toString().substring(0,"HHmmss.SSS".length),"HHmmss.SSS",new Date(0)),e)}catch(t){}return Ua(parsedDateTime,e)}};n(53);function Fa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M()(this,n)}}var La=qa,Va=Aa,Ba=Na,Ga=function(t){b()(n,t);var e=Fa(n);function n(){return h()(this,n),e.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var t=this.props,e=t.studyDate,n=t.studyTime,r=t.studyDescription,a=t.patientName,i=t.patientId,o=t.seriesNumber,s=t.seriesDescription,u=t.voi,c=u.windowWidth,d=u.windowCenter,l="W: ".concat(c.toFixed(0)," L: ").concat(d.toFixed(0));return D.a.createElement("div",{className:"ViewportOverlay"},D.a.createElement("div",{className:"top-left overlay-element"},D.a.createElement("div",null,La(a)),D.a.createElement("div",null,i)),D.a.createElement("div",{className:"top-right overlay-element"},D.a.createElement("div",null,r),D.a.createElement("div",null,Va(e)," ",Ba(n))),D.a.createElement("div",{className:"bottom-right overlay-element"},D.a.createElement("div",null,l)),D.a.createElement("div",{className:"bottom-left overlay-element"},D.a.createElement("div",null,o>=0?"Ser: ".concat(o):""),D.a.createElement("div",null,D.a.createElement("div",null,s))))}}]),n}(T.PureComponent);x()(Ga,"propTypes",{voi:R.a.object.isRequired,studyDate:R.a.string,studyTime:R.a.string,studyDescription:R.a.string,patientName:R.a.string,patientId:R.a.string,seriesNumber:R.a.string,seriesDescription:R.a.string}),x()(Ga,"defaultProps",{voi:{windowWidth:0,windowCenter:0}});var Ha=Ga,Ya=n(21);function _a(t){var e=t,n=function(){e&&(e.unsubscribe(),e=null)};return{sub:function(t){n(),e=t},unsubscribe:n}}var Qa=n(22),za=n.n(Qa),Xa=n(23),Ka=n.n(Xa),Za=n(34),Ja=n.n(Za),$a=n(35),ti=n.n($a),ei=n(36),ni=n.n(ei),ri=n(37),ai=n.n(ri),ii=function(t,e,n){if(e)for(var r=Math.min(256,e.length),a=0;a<r;a++){var i=e[a];t.cfun.addRGBPoint(a,i[0]/255,i[1]/255,i[2]/255);var o=i[3]/255*n;t.ofun.addPointLong(a,o,.5,1)}};function oi(t,e,n){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.colorLUT,o=n.globalOpacity,s=n.visible,u=n.renderOutline,c=n.outlineThickness;if(void 0===s&&(s=!1),void 0===o&&(o=1),void 0===c&&(c=3),e)r=e;else{(r=za.a.newInstance(t.get("spacing","origin","direction"))).setDimensions(t.getDimensions()),r.computeTransforms();var d=new Uint8Array(t.getNumberOfPoints()),l=Ka.a.newInstance({numberOfComponents:1,values:d});r.getPointData().setScalars(l)}var f=ti.a.newInstance();if(a){var h=.7*Math.sqrt(r.getSpacing().map(function(t){return t*t}).reduce(function(t,e){return t+e},0));f.setSampleDistance(h)}var p={actor:Ja.a.newInstance(),mapper:f,cfun:ni.a.newInstance(),ofun:ai.a.newInstance()};return p.actor.setMapper(p.mapper),p.actor.setVisibility(s),p.ofun.addPointLong(0,0,.5,1),p.ofun.addPointLong(1,1,.5,1),i?ii(p,i,o):(p.cfun.addRGBPoint(1,1,0,0),p.cfun.addRGBPoint(2,0,1,0),p.cfun.addRGBPoint(3,0,1,1),p.ofun.addPointLong(1,.5,.5,1)),p.actor.getProperty().setRGBTransferFunction(0,p.cfun),p.actor.getProperty().setScalarOpacity(0,p.ofun),p.actor.getProperty().setInterpolationTypeToNearest(),u&&(p.actor.getProperty().setUseLabelOutline(!0),p.actor.getProperty().setLabelOutlineThickness(c)),p.ofun.setClamping(!1),p.actor.getProperty().setScalarOpacityUnitDistance(0,.1),p.actor.getProperty().setUseGradientOpacity(0,!1),p}function si(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M()(this,n)}}var ui=function(t){b()(n,t);var e=si(n);function n(t){var r;return h()(this,n),r=e.call(this,t),x()(v()(r),"getVOI",function(t){var e=t.getProperty().getRGBTransferFunction(0).getMappingRange(),n=Math.abs(e[1]-e[0]);return{windowCenter:e[0]+n/2,windowWidth:n}}),r.genericRenderWindow=null,r.widgetManager=U.a.newInstance(),r.container=D.a.createRef(),r.subs={interactor:_a(),data:_a(),labelmap:_a(),paint:_a(),paintStart:_a(),paintEnd:_a()},r.interactorStyleSubs=[],r.state={voi:r.getVOI(t.volumes[0])},r.apiProperties={},r}return g()(n,[{key:"updatePaintbrush",value:function(){var t=this.paintWidget.getManipulator(),e=(this.paintWidget.getWidgetState().getHandle(),this.paintRenderer.getActiveCamera()),n=e.getDirectionOfProjection();t.setNormal.apply(t,l()(n)),t.setOrigin.apply(t,l()(e.getFocalPoint()))}},{key:"componentDidMount",value:function(){var t=this,e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)});this.genericRenderWindow=W.a.newInstance({background:[0,0,0]}),this.genericRenderWindow.setContainer(this.container.current);var n,r,a=[],i=[];this.renderer=this.genericRenderWindow.getRenderer(),this.renderWindow=this.genericRenderWindow.getRenderWindow();var o=this.genericRenderWindow.getOpenGLRenderWindow();this.paintRenderer=E.a.newInstance(),this.renderWindow.addRenderer(this.paintRenderer),this.renderWindow.setNumberOfLayers(2),this.paintRenderer.setLayer(1),this.paintRenderer.setInteractive(!1),o.buildPass(!0);var s=Jn.newInstance();this.renderWindow.getInteractor().setInteractorStyle(s);var u=function(){var e=t.renderer.getActiveCamera(),n=t.paintRenderer.getActiveCamera(),r=e.getReferenceByName("position"),a=e.getReferenceByName("focalPoint"),i=e.getReferenceByName("viewUp"),o=e.getReferenceByName("viewAngle");n.set({position:r,focalPoint:a,viewUp:i,viewAngle:o})};if(this.renderWindow.getInteractor().onAnimation(u),u(),this.widgetManager.disablePicking(),this.widgetManager.setRenderer(this.paintRenderer),this.paintWidget=nr.a.newInstance(),this.paintWidget.setRadius(5),this.paintFilter=tr.a.newInstance(),this.paintFilter.setLabel(1),this.paintFilter.setRadius(5),this.componentDidUpdate({}),this.labelmap&&this.labelmap.actor&&this.renderer.addVolume(this.labelmap.actor),this.props.actors&&(a=a.concat(this.props.actors)),this.labelmap&&this.labelmap.actor&&(a=a.concat(this.labelmap.actor)),this.props.volumes&&(i=i.concat(this.props.volumes)),r=[this.paintFilter],n=[this.paintWidget],this.props.orientation){var c=this.props.orientation;s.setSliceOrientation(c.sliceNormal,c.viewUp)}else s.setSliceNormal(0,0,1);this.renderer.getActiveCamera().setParallelProjection(!0),this.renderer.resetCamera(),s.setVolumeActor(this.props.volumes[0]);var d=s.getSliceRange();s.setSlice((d[0]+d[1])/2),s.onModified(function(){t.updatePaintbrush()}),this.updatePaintbrush();var l=ur.newInstance();l.setRenderer(this.renderer),l.setScale(1),this.svgWidgetManager=l,this.genericRenderWindow.resize();var f=this.updateVOI.bind(this),h=this.getOrientation.bind(this),p=this.setInteractorStyle.bind(this),g=this.getSlabThickness.bind(this),m=this.setSlabThickness.bind(this),v=this.addSVGWidget.bind(this),w=this.getApiProperty.bind(this),b=this.setApiProperty.bind(this),y=this.setSegmentRGB.bind(this),M=this.setSegmentRGBA.bind(this),S=this.setSegmentAlpha.bind(this),k=this.updateImage.bind(this),C=this.setSegmentVisibility.bind(this),x=this.setGlobalOpacity.bind(this),T=this.setVisibility.bind(this),D=this.setOutlineThickness.bind(this),P=this.setOutlineRendering.bind(this),R=this.requestNewSegmentation.bind(this);if(this.svgWidgets={},this.props.onCreated){var I={uid:e,genericRenderWindow:this.genericRenderWindow,widgetManager:this.widgetManager,svgWidgetManager:this.svgWidgetManager,addSVGWidget:v,container:this.container.current,widgets:n,svgWidgets:this.svgWidgets,filters:r,actors:a,volumes:i,_component:this,updateImage:k,updateVOI:f,getOrientation:h,setInteractorStyle:p,getSlabThickness:g,setSlabThickness:m,setSegmentRGB:y,setSegmentRGBA:M,setSegmentAlpha:S,setSegmentVisibility:C,setGlobalOpacity:x,setVisibility:T,setOutlineThickness:D,setOutlineRendering:P,requestNewSegmentation:R,get:w,set:b,type:"VIEW2D"};this.props.onCreated(I)}}},{key:"getApiProperty",value:function(t){return this.apiProperties[t]}},{key:"setApiProperty",value:function(t,e){this.apiProperties[t]=e}},{key:"addSVGWidget",value:function(t,e){var n=this.svgWidgetManager;n.addWidget(t),n.render(),this.svgWidgets[e]=t}},{key:"getSlabThickness",value:function(){var t=this.genericRenderWindow.getRenderWindow().getInteractor().getInteractorStyle();if(t.getSlabThickness)return t.getSlabThickness()}},{key:"setSlabThickness",value:function(t){var e=this.genericRenderWindow.getRenderWindow(),n=e.getInteractor().getInteractorStyle();if(n.setSlabThickness&&(n.setSlabThickness(t),this.props.paintFilterLabelMapImageData)){var r=this.labelmap.actor;!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(t-e)<n}(t,.1)?r.setVisibility(!1):r.getVisibility()!==this.props.labelmapRenderingOptions.visible&&r.setVisibility(this.props.labelmapRenderingOptions.visible)}e.render()}},{key:"updateImage",value:function(){this.genericRenderWindow.getRenderWindow().render()}},{key:"setInteractorStyle",value:function(t){for(var e,n=this,r=t.istyle,a=t.callbacks,i=void 0===a?{}:a,o=t.configuration,s=void 0===o?{}:o,u=this.props.volumes,c=this.genericRenderWindow.getRenderWindow(),d=c.getInteractor().getInteractorStyle();this.interactorStyleSubs.length;)this.interactorStyleSubs.pop().unsubscribe();d.getViewport&&r.getViewport&&(e=d.getViewport());var l=this.getSlabThickness(),f=c.getInteractor();f.setInteractorStyle(r),r.setInteractor(f),e&&r.setViewport(e),r.getVolumeActor()!==u[0]&&(l&&r.setSlabThickness&&r.setSlabThickness(l),r.setVolumeActor(u[0])),Object.keys(i).forEach(function(t){if("function"==typeof r[t]){var e=r[t](i[t]);e&&"function"==typeof e.unsubscribe&&n.interactorStyleSubs.push(e)}}),s&&r.set(s),c.render()}},{key:"updateVOI",value:function(t,e){this.setState({voi:{windowWidth:t,windowCenter:e}})}},{key:"getOrientation",value:function(){return this.props.orientation}},{key:"setSegmentRGBA",value:function(t,e){var n=c()(e,4),r=n[0],a=n[1],i=n[2],o=n[3];this.setSegmentRGB(t,[r,a,i]),this.setSegmentAlpha(t,o)}},{key:"setGlobalOpacity",value:function(t){var e=this.labelmap,n=this.props.labelmapRenderingOptions.colorLUT;ii(e,n,t)}},{key:"setVisibility",value:function(t){this.labelmap.actor.setVisibility(t)}},{key:"setOutlineThickness",value:function(t){this.labelmap.actor.getProperty().setLabelOutlineThickness(t)}},{key:"setOutlineRendering",value:function(t){this.labelmap.actor.getProperty().setUseLabelOutline(t)}},{key:"requestNewSegmentation",value:function(){this.props.labelmapRenderingOptions.onNewSegmentationRequested()}},{key:"setSegmentRGB",value:function(t,e){var n=c()(e,3),r=n[0],a=n[1],i=n[2];this.labelmap.cfun.addRGBPoint(t,r/255,a/255,i/255)}},{key:"setSegmentVisibility",value:function(t,e){this.setSegmentAlpha(t,e?255:0)}},{key:"setSegmentAlpha",value:function(t,e){var n=this.labelmap,r=this.props.labelmapRenderingOptions.globalOpacity;void 0===r&&(r=1);var a=e/255*r;n.ofun.addPointLong(t,a,.5,1)}},{key:"componentDidUpdate",value:function(t){var e=this;if(t.volumes!==this.props.volumes&&(this.props.volumes.forEach(function(t){t.isA("vtkVolume")||console.warn("Data to <Vtk2D> is not vtkVolume data")}),this.props.volumes.length&&this.props.volumes.forEach(this.renderer.addVolume),this.renderWindow.render()),!t.paintFilterBackgroundImageData&&this.props.paintFilterBackgroundImageData?(this.subs.data.sub(this.props.paintFilterBackgroundImageData.onModified(function(){e.genericRenderWindow.resize(),e.renderWindow.render()})),this.paintFilter.setBackgroundImage(this.props.paintFilterBackgroundImageData)):t.paintFilterBackgroundImageData&&!this.props.paintFilterBackgroundImageData&&(this.paintFilter.setBackgroundImage(null),this.subs.data.unsubscribe()),t.paintFilterLabelMapImageData!==this.props.paintFilterLabelMapImageData&&this.props.paintFilterLabelMapImageData){if(this.subs.labelmap.unsubscribe(),this.labelmap&&this.labelmap.actor&&(this.renderer.removeVolume(this.labelmap.actor),this.api)){var n=this.api.actors,r=n.findIndex(function(t){return t===e.labelmap.actor});-1!==r&&n.splice(r,1)}var a=this.props.paintFilterLabelMapImageData,i=oi(this.props.paintFilterBackgroundImageData,a,this.props.labelmapRenderingOptions);this.labelmap=i,this.props.labelmapRenderingOptions.segmentsDefaultProperties.forEach(function(t,n){t&&e.setSegmentVisibility(n,t.visible)}),this.labelmap&&this.labelmap.actor&&(this.renderer.addVolume(this.labelmap.actor),this.api&&(this.api.actors=this.api.actors.concat(this.labelmap.actor))),i.mapper.setInputConnection(this.paintFilter.getOutputPort()),this.paintFilter.setLabelMap(a),this.subs.labelmap.sub(a.onModified(function(){i.mapper.modified(),e.renderWindow.render()})),this.genericRenderWindow.resize()}t.labelmapRenderingOptions&&t.labelmapRenderingOptions.visible!==this.props.labelmapRenderingOptions.visible&&this.labelmap.actor.setVisibility(t.labelmapRenderingOptions.visible),t.painting!==this.props.painting&&(this.props.painting?(this.viewWidget=this.widgetManager.addWidget(this.paintWidget,Ya.ViewTypes.SLICE),this.subs.paintStart.sub(this.viewWidget.onStartInteractionEvent(function(){e.paintFilter.startStroke(),e.paintFilter.addPoint(e.paintWidget.getWidgetState().getTrueOrigin()),e.props.onPaintStart&&e.props.onPaintStart()})),this.subs.paint.sub(this.viewWidget.onInteractionEvent(function(){e.viewWidget.getPainting()&&(e.paintFilter.addPoint(e.paintWidget.getWidgetState().getTrueOrigin()),e.props.onPaint&&e.props.onPaint())})),this.subs.paintEnd.sub(this.viewWidget.onEndInteractionEvent(function(){var t=e.paintFilter.endStroke();e.props.onPaintEnd&&t.then(function(t){e.props.onPaintEnd(t)})})),this.widgetManager.grabFocus(this.paintWidget),this.widgetManager.enablePicking(),this.genericRenderWindow.resize()):this.viewWidget&&(this.widgetManager.releaseFocus(),this.widgetManager.removeWidget(this.paintWidget),this.widgetManager.disablePicking(),this.subs.paintStart.unsubscribe(),this.subs.paint.unsubscribe(),this.subs.paintEnd.unsubscribe(),this.viewWidget=null,this.genericRenderWindow.resize()))}},{key:"componentWillUnmount",value:function(){var t=this;Object.keys(this.subs).forEach(function(e){t.subs[e].unsubscribe()}),this.props.onDestroyed&&this.props.onDestroyed(),this.genericRenderWindow.delete()}},{key:"render",value:function(){if(!this.props.volumes||!this.props.volumes.length)return null;var t={width:"100%",height:"100%",position:"relative"},e=this.state.voi;return D.a.createElement("div",{style:t},D.a.createElement("div",{ref:this.container,style:t}),D.a.createElement(Ha,s()({},this.props.dataDetails,{voi:e})))}}]),n}(T.Component);function ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M()(this,n)}}x()(ui,"propTypes",{volumes:R.a.array.isRequired,actors:R.a.array,painting:R.a.bool.isRequired,paintFilterBackgroundImageData:R.a.object,paintFilterLabelMapImageData:R.a.object,onPaint:R.a.func,onPaintStart:R.a.func,onPaintEnd:R.a.func,dataDetails:R.a.object,onCreated:R.a.func,onDestroyed:R.a.func,orientation:R.a.object,labelmapRenderingOptions:R.a.object}),x()(ui,"defaultProps",{painting:!1,labelmapRenderingOptions:{visible:!0,renderOutline:!0,segmentsDefaultProperties:[],onNewSegmentationRequested:function(){}}});var di=function(t){b()(n,t);var e=ci(n);function n(t){var r;return h()(this,n),(r=e.call(this,t)).genericRenderWindow=null,r.widgetManager=U.a.newInstance(),r.container=D.a.createRef(),r.subs={interactor:_a(),data:_a(),labelmap:_a(),paint:_a(),paintStart:_a(),paintEnd:_a()},r}return g()(n,[{key:"componentDidMount",value:function(){this.genericRenderWindow=W.a.newInstance({background:[0,0,0]}),this.genericRenderWindow.setContainer(this.container.current);var t,e,n=[],r=[];if(this.renderer=this.genericRenderWindow.getRenderer(),this.renderWindow=this.genericRenderWindow.getRenderWindow(),this.widgetManager.disablePicking(),this.widgetManager.setRenderer(this.renderer),this.paintWidget=nr.a.newInstance(),this.paintWidget.setRadius(5),this.paintFilter=tr.a.newInstance(),this.paintFilter.setLabel(1),this.paintFilter.setRadius(5),this.componentDidUpdate({}),this.props.actors&&(n=n.concat(this.props.actors)),this.labelmap&&this.labelmap.actor&&(n=n.concat(this.labelmap.actor)),this.props.volumes&&(r=r.concat(this.props.volumes)),e=[this.paintFilter],t=[this.paintWidget],this.labelmap&&this.labelmap.actor&&this.renderer.addVolume(this.labelmap.actor),this.renderer.resetCamera(),this.renderer.updateLightsGeometryToFollowCamera(),this.genericRenderWindow.resize(),this.props.onCreated){var a={genericRenderWindow:this.genericRenderWindow,widgetManager:this.widgetManager,container:this.container.current,widgets:t,filters:e,actors:n,volumes:r,type:"VIEW3D",_component:this};this.props.onCreated(a)}}},{key:"componentDidUpdate",value:function(t){var e=this;if(console.time("View3D componentDidUpdate"),t.volumes!==this.props.volumes&&(this.props.volumes.forEach(function(t){t.isA("vtkVolume")||console.warn("Data to <Vtk2D> is not vtkVolume data")}),this.props.volumes.length&&this.props.volumes.forEach(this.renderer.addVolume),this.renderWindow.render()),t.actors!==this.props.actors&&this.props.actors&&(this.props.actors.forEach(function(t){t.isA("vtkActor")||console.warn("Data to <Vtk2D> is not vtkActor data")}),this.props.actors.length&&this.props.actors.forEach(this.renderer.addActor),this.renderWindow.render()),!t.paintFilterBackgroundImageData&&this.props.paintFilterBackgroundImageData?(this.subs.data.sub(this.props.paintFilterBackgroundImageData.onModified(function(){return e.renderWindow.render()})),this.paintFilter.setBackgroundImage(this.props.paintFilterBackgroundImageData)):t.paintFilterBackgroundImageData&&!this.props.paintFilterBackgroundImageData&&(this.paintFilter.setBackgroundImage(null),this.subs.data.unsubscribe()),t.paintFilterLabelMapImageData!==this.props.paintFilterLabelMapImageData&&this.props.paintFilterLabelMapImageData){this.subs.labelmap.unsubscribe();var n=this.props.paintFilterLabelMapImageData,r=oi(this.props.paintFilterBackgroundImageData,n,this.props.labelmapRenderingOptions,!1);this.labelmap=r,r.mapper.setInputConnection(this.paintFilter.getOutputPort()),this.paintFilter.setLabelMap(n),this.subs.labelmap.sub(n.onModified(function(){r.mapper.modified(),e.renderWindow.render()}))}t.painting!==this.props.painting&&(this.props.painting?(console.time("turnOnPainting"),this.viewWidget=this.widgetManager.addWidget(this.paintWidget,Ya.ViewTypes.VOLUME),this.subs.paintStart.sub(this.viewWidget.onStartInteractionEvent(function(){e.paintFilter.startStroke(),e.paintFilter.addPoint(e.paintWidget.getWidgetState().getTrueOrigin()),e.props.onPaintStart&&e.props.onPaintStart()})),this.subs.paint.sub(this.viewWidget.onInteractionEvent(function(){e.viewWidget.getPainting()&&(e.paintFilter.addPoint(e.paintWidget.getWidgetState().getTrueOrigin()),e.props.onPaint&&e.props.onPaint())})),this.subs.paintEnd.sub(this.viewWidget.onEndInteractionEvent(function(){var t=e.paintFilter.endStroke();e.props.onPaintEnd&&t.then(function(t){e.props.onPaintEnd(t)})})),this.widgetManager.grabFocus(this.paintWidget),this.widgetManager.enablePicking(),console.timeEnd("turnOnPainting")):this.viewWidget&&(console.time("turnOffPainting"),this.widgetManager.releaseFocus(),this.widgetManager.removeWidget(this.paintWidget),this.widgetManager.disablePicking(),this.subs.paintStart.unsubscribe(),this.subs.paint.unsubscribe(),this.subs.paintEnd.unsubscribe(),this.viewWidget=null,console.timeEnd("turnOffPainting"))),console.timeEnd("View3D componentDidUpdate")}},{key:"componentWillUnmount",value:function(){var t=this;Object.keys(this.subs).forEach(function(e){t.subs[e].unsubscribe()}),this.props.onDestroyed&&this.props.onDestroyed(),this.genericRenderWindow.delete()}},{key:"render",value:function(){if(!this.props.volumes&&!this.props.actors)return null;var t={width:"100%",height:"100%",position:"relative"},e={windowCenter:0,windowWidth:0};if(this.pipeline){var n=this.props.volumes[0].getProperty().getRGBTransferFunction(0).getMappingRange(),r=n[0]+n[1];e={windowCenter:n[0]+r/2,windowWidth:r}}return D.a.createElement("div",{style:t},D.a.createElement("div",{ref:this.container,style:t}),D.a.createElement(Ha,s()({},this.props.dataDetails,{voi:e})))}}]),n}(T.Component);function li(t,e){var n=Math.abs(t-e);return{windowWidth:n,windowCenter:t+n/2}}x()(di,"propTypes",{volumes:R.a.array,actors:R.a.array,painting:R.a.bool.isRequired,paintFilterBackgroundImageData:R.a.object,paintFilterLabelMapImageData:R.a.object,onPaint:R.a.func,onPaintStart:R.a.func,onPaintEnd:R.a.func,sliceNormal:R.a.array.isRequired,dataDetails:R.a.object,onCreated:R.a.func,onDestroyed:R.a.func,labelmapRenderingOptions:R.a.object}),x()(di,"defaultProps",{painting:!1,sliceNormal:[0,0,1],labelmapRenderingOptions:{visible:!0,renderOutline:!1}});var fi=et.a.States;var hi={wlStartPos:[0,0],levelScale:1};function pi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,hi,n),Jn.extend(t,e,n),A.a.setGet(t,e,["onLevelsChanged","levelScale"]),function(t,e){e.classHierarchy.push("vtkInteractorStyleMPRWindowLevel");var n=t.handleMouseMove;t.handleMouseMove=function(r){var a=[r.position.x,r.position.y];e.state===fi.IS_WINDOW_LEVEL&&(t.windowLevelFromMouse(a),t.invokeInteractionEvent({type:"InteractionEvent"})),n&&n(r)},t.windowLevelFromMouse=function(n){var r=e.volumeActor.getMapper().getInputData().getPointData().getScalars().getRange(),a=r[1]-r[0],i=Math.round(a/1024)*t.getLevelScale(),o=Math.round((n[0]-e.wlStartPos[0])*i),s=Math.round((n[1]-e.wlStartPos[1])*i),u=e.levels.windowWidth+o,c=e.levels.windowCenter-s;if(u=Math.max(.01,u),e.windowWidth!==u||e.windowCenter!==c){t.setWindowLevel(u,c),e.wlStartPos[0]=Math.round(n[0]),e.wlStartPos[1]=Math.round(n[1]);var d=t.getOnLevelsChanged();d&&d({windowCenter:c,windowWidth:u})}},t.getWindowLevel=function(){var t=e.volumeActor.getProperty().getRGBTransferFunction(0).getMappingRange().slice();return li.apply(void 0,l()(t))},t.setWindowLevel=function(t,n){var r=function(t,e){return{lower:e-t/2,upper:e+t/2}}(t,n);e.levels.windowWidth=t,e.levels.windowCenter=n,e.volumeActor.getProperty().getRGBTransferFunction(0).setMappingRange(r.lower,r.upper)};var r=t.handleLeftButtonPress;t.handleLeftButtonPress=function(n){if(e.wlStartPos[0]=n.position.x,e.wlStartPos[1]=n.position.y,n.shiftKey||n.controlKey)r&&r(n);else{var a=e.volumeActor.getProperty();a&&(e.initialMRange=a.getRGBTransferFunction(0).getMappingRange().slice(),e.levels=li(e.initialMRange[0],e.initialMRange[1]),t.startWindowLevel())}},t.superHandleLeftButtonRelease=t.handleLeftButtonRelease,t.handleLeftButtonRelease=function(){switch(e.state){case fi.IS_WINDOW_LEVEL:t.endWindowLevel();break;default:t.superHandleLeftButtonRelease()}}}(t,e)}var gi=A.a.newInstance(pi,"vtkInteractorStyleMPRWindowLevel"),mi=Object.assign({newInstance:gi,extend:pi}),vi=et.a.States;var wi={};function bi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,wi,n),Jn.extend(t,e,n),A.a.setGet(t,e,["callback","apis","apiIndex","onScroll"]),function(t,e){function n(n){var r=e.apis,a=e.apiIndex,i=r[a],o=n.position,s=n.pokedRenderer,u=$.a.newInstance();u.setCoordinateSystemToDisplay(),u.setValue(o.x,o.y,0);for(var c=u.getComputedWorldValue(s),d=s.getActiveCamera().getDirectionOfProjection(),l=i.getSlabThickness()/2,f=0;f<c.length;f++)c[f]+=l*d[f];i.svgWidgets.crosshairsWidget.moveCrosshairs(c,r,a),t.invokeInteractionEvent({type:"InteractionEvent"})}e.classHierarchy.push("vtkInteractorStyleMPRCrosshairs");var r=t.handleMouseMove;t.handleMouseMove=function(t){e.state===vi.IS_WINDOW_LEVEL&&n(t),r&&r(t)};var a=t.handleLeftButtonPress;t.handleLeftButtonPress=function(r){r.shiftKey||r.controlKey?a&&a(r):e.volumeActor&&(n(r),t.startWindowLevel())},t.superHandleLeftButtonRelease=t.handleLeftButtonRelease,t.handleLeftButtonRelease=function(){switch(e.state){case vi.IS_WINDOW_LEVEL:t.endWindowLevel();break;default:t.superHandleLeftButtonRelease()}}}(t,e)}var yi=A.a.newInstance(bi,"vtkInteractorStyleMPRCrosshairs"),Mi=Object.assign({newInstance:yi,extend:bi}),Si=et.a.States;var ki={rotateStartPos:[0,0]};function Ci(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,ki,n),Jn.extend(t,e,n),A.a.setGet(t,e,["onInteractiveRotateChanged"]),function(t,e){e.classHierarchy.push("vtkInteractorStyleMPRRotate"),e.wlStartPos=[0,0];var n=t.handleMouseMove;t.handleMouseMove=function(r){var a=[Math.round(r.position.x),Math.round(r.position.y)],i=r.pokedRenderer;e.state===Si.IS_ROTATE&&(t.rotateFromMouse(a,i),t.invokeInteractionEvent({type:"InteractionEvent"})),n&&n(r)},t.rotateFromMouse=function(n,r){var a=e.interactor.getView().getViewportSize(r),i=100/a[0],o=100/a[1],s=-(n[1]-e.rotateStartPos[1])*o,u=-(n[0]-e.rotateStartPos[0])*i;t.getViewport().rotateRelative(s,u),e.rotateStartPos[0]=Math.round(n[0]),e.rotateStartPos[1]=Math.round(n[1])};var r=t.handleLeftButtonPress;t.handleLeftButtonPress=function(n){e.rotateStartPos[0]=Math.round(n.position.x),e.rotateStartPos[1]=Math.round(n.position.y),n.shiftKey||n.controlKey?r&&r(n):e.volumeActor.getProperty()&&t.startRotate()},t.superHandleLeftButtonRelease=t.handleLeftButtonRelease,t.handleLeftButtonRelease=function(){switch(e.state){case Si.IS_ROTATE:t.endRotate();break;default:t.superHandleLeftButtonRelease()}}}(t,e)}var xi=A.a.newInstance(Ci,"vtkInteractorStyleMPRRotate"),Ti=Object.assign({newInstance:xi,extend:Ci}),Di=1;function Pi(t,e){e.classHierarchy.push("vtkSVGCrosshairsWidget"),e.widgetId="vtkSVGCrosshairsWidget-".concat(Di++),t.render=function(t,n){var r=function(t,e){var n=t.querySelector("#".concat(e));return n||((n=document.createElement("g")).setAttribute("id",e),t.appendChild(n)),n}(t,e.widgetId),a=e.point,i=e.strokeColor,o=e.strokeWidth,s=e.strokeDashArray,u=e.padding;if(null!==a[0]&&null!==a[1]){var c=parseInt(t.getAttribute("width"),10),d=parseInt(t.getAttribute("height"),10),l=a.slice();l[0]=a[0]*n,l[1]=d-a[1]*n;var f=[0,d/n/2],h=[c/n/2,0],p=[c/n,d/n/2],g=[c/n/2,d/n];e.display?r.innerHTML='\n      <g id="container" fill-opacity="1" stroke-dasharray="none" stroke="none" stroke-opacity="1" fill="none">\n       <g>\n       \x3c!-- TODO: Why is this <svg> necessary?? </svg> If I don\'t include it, nothing renders !--\x3e\n       <svg version="1.1" viewBox="0 0 '.concat(c," ").concat(d,'" width=').concat(c," height=").concat(d,' style="width: 100%; height: 100%">\n       \x3c!-- Top !--\x3e\n        <line\n          x1="').concat(l[0],'"\n          y1="').concat(h[1],'"\n          x2="').concat(l[0],'"\n          y2="').concat(l[1]-u,'"\n          stroke="').concat(i,'"\n          stroke-dasharray="').concat(s,'"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          stroke-width="').concat(o,'"\n        ></line>\n        \x3c!-- Right !--\x3e\n        <line\n          x1="').concat(p[0],'"\n          y1="').concat(l[1],'"\n          x2="').concat(l[0]+u,'"\n          y2="').concat(l[1],'"\n          stroke-dasharray="').concat(s,'"\n          stroke="').concat(i,'"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          stroke-width=').concat(o,'\n        ></line>\n        \x3c!-- Bottom !--\x3e\n        <line\n          x1="').concat(l[0],'"\n          y1="').concat(g[1],'"\n          x2="').concat(l[0],'"\n          y2="').concat(l[1]+u,'"\n          stroke-dasharray="').concat(s,'"\n          stroke="').concat(i,'"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          stroke-width=').concat(o,'\n        ></line>\n        \x3c!-- Left !--\x3e\n        <line\n          x1="').concat(f[0],'"\n          y1="').concat(l[1],'"\n          x2="').concat(l[0]-u,'"\n          y2="').concat(l[1],'"\n          stroke-dasharray="').concat(s,'"\n          stroke="').concat(i,'"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          stroke-width=').concat(o,"\n        ></line>\n       </g>\n      </g>\n            "):r.innerHTML=""}},t.resetCrosshairs=function(e,n){var r=e[n];if(r.svgWidgets.crosshairsWidget){var a=r.genericRenderWindow.getRenderer(),i=a.getRenderWindow().getViews()[0].getViewportSize(a),o=$.a.newInstance();o.setCoordinateSystemToDisplay(),o.setValue(.5*i[0],.5*i[1],0);for(var s=o.getComputedWorldValue(a),u=a.getActiveCamera().getDirectionOfProjection(),c=r.getSlabThickness()/2,d=0;d<s.length;d++)s[d]+=c*u[d];t.moveCrosshairs(s,e)}},t.moveCrosshairs=function(t,e){void 0!==t&&void 0!==e||console.error("worldPos, apis must be defined in order to update crosshairs."),e.forEach(function(e,n){e.set("cachedCrosshairWorldPosition",t);var r=e.genericRenderWindow.getRenderWindow(),a=r.getInteractor().getInteractorStyle(),i=a.getSliceNormal(),o=V.a.buildFromDegree().identity().rotateFromDirections(i,[1,0,0]),s=t.slice();o.apply(s);var u=s[0];a.setSlice(u),r.render();var c=e.genericRenderWindow.getRenderer(),d=$.a.newInstance();d.setCoordinateSystemToWorld(),d.setValue.apply(d,l()(t));var f=d.getComputedDisplayValue(c),h=e.svgWidgetManager;e.svgWidgets.crosshairsWidget.setPoint(f[0],f[1]),h.render()})},t.updateCrosshairForApi=function(e){if(e.svgWidgets.crosshairsWidget){var n=e.genericRenderWindow.getRenderer(),r=e.get("cachedCrosshairWorldPosition"),a=$.a.newInstance();a.setCoordinateSystemToWorld(),a.setValue.apply(a,l()(r));var i=a.getComputedDoubleDisplayValue(n),o=$.a.newInstance();o.setCoordinateSystemToDisplay(),o.setValue(i[0],i[1],0);for(var s=o.getComputedWorldValue(n),u=n.getActiveCamera().getDirectionOfProjection(),c=e.getSlabThickness()/2,d=0;d<s.length;d++)s[d]+=c*u[d];t.moveCrosshairs(s,[e])}}}var Ri={point:[null,null],strokeColor:"#00ff00",strokeWidth:1,strokeDashArray:"",padding:20,display:!0};function Ii(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Ri,n),A.a.obj(t,e),A.a.get(t,e,["widgetId"]),A.a.setGet(t,e,["strokeColor","strokeWidth","strokeDashArray","display"]),A.a.setGetArray(t,e,["point","padding"],2),Pi(t,e)}var Wi={newInstance:A.a.newInstance(Ii,"vtkSVGCrosshairsWidget"),extend:Ii},Oi=n(5),Ei=n.n(Oi);var ji=new Map;function Ui(t,e){var n=ji.get(e);if(n)return n;var r,i=function(t){var e=t[0],n=Ei.a.metaData.get("imagePixelModule",e),r=n.pixelRepresentation,a=n.bitsAllocated,i=n.bitsStored,o=n.highBit,s=n.photometricInterpretation,u=n.samplesPerPixel,c=Ei.a.metaData.get("voiLutModule",e),d=c.windowWidth,l=c.windowCenter;Array.isArray(d)&&(d=d[0]),Array.isArray(l)&&(l=l[0]);var f=Ei.a.metaData.get("generalSeriesModule",e).modality,h=new Map;return t.forEach(function(t){var e=Ei.a.metaData.get("imagePlaneModule",t);h.set(t,e)}),{metaData0:h.values().next().value,metaDataMap:h,imageIds:t,imageMetaData0:{bitsAllocated:a,bitsStored:i,samplesPerPixel:u,highBit:o,photometricInterpretation:s,pixelRepresentation:r,windowWidth:d,windowCenter:l,modality:f}}}(t),o=i.metaData0,s=i.metaDataMap,u=i.imageMetaData0,c=o.rowCosines,d=o.columnCosines,f=a.fromValues.apply(a,l()(c)),h=a.fromValues.apply(a,l()(d)),p=a.cross([],f,h),g=function(t,e){var n=Array.from(e.values()),r=n[0],i=n.map(function(e){var n=a.sub([],r.imagePositionPatient,e.imagePositionPatient);return{distance:a.dot(n,t),dataset:e}});i.sort(function(t,e){return e.distance-t.distance});var o=i.map(function(t){return t.dataset}),s=i.map(function(t){return t.distance});return{spacing:Math.abs(s[1]-s[0]),origin:i[0].dataset.imagePositionPatient,sortedDatasets:o}}(p,s),m=g.spacing,v=g.origin,w=g.sortedDatasets,b=o.columnPixelSpacing,y=o.rowPixelSpacing,M=m,S=o.columns,k=o.rows,C=s.size,x=1===u.pixelRepresentation;if(o.numberOfComponents>1)throw new Error("Multi component image not supported by this plugin.");switch(u.bitsAllocated){case 8:throw x?new Error("8 Bit signed images are not yet supported by this plugin."):new Error("8 Bit unsigned images are not yet supported by this plugin.");case 16:r=new Float32Array(S*k*C)}var T=Ka.a.newInstance({name:"Pixels",numberOfComponents:1,values:r}),D=za.a.newInstance(),P=[].concat(l()(f),l()(h),l()(p));D.setDimensions(S,k,C),D.setSpacing(b,y,M),D.setDirection(P),D.setOrigin.apply(D,l()(v)),D.getPointData().setScalars(T);var R={imageIds:t,metaData0:o,imageMetaData0:u,dimensions:[S,k,C],spacing:[b,y,M],origin:v,direction:P,vtkImageData:D,metaDataMap:s,sortedDatasets:w,loaded:!1,subscriptions:{onPixelDataInserted:[],onPixelDataInsertedError:[],onAllPixelDataInserted:[]},onPixelDataInserted:function(t){R.subscriptions.onPixelDataInserted.push(t)},onPixelDataInsertedError:function(t){R.subscriptions.onPixelDataInsertedError.push(t)},onAllPixelDataInserted:function(t){R.subscriptions.onAllPixelDataInserted.push(t)},_publishPixelDataInserted:function(t){R.subscriptions.onPixelDataInserted.forEach(function(e){e(t)})},_publishAllPixelDataInserted:function(){R.subscriptions.onAllPixelDataInserted.forEach(function(t){t()}),R.isLoading=!1,R.loaded=!0,R.vtkImageData.modified(),R.subscriptions={onPixelDataInserted:[],onPixelDataInsertedError:[],onAllPixelDataInserted:[]}},_publishPixelDataInsertedError:function(t){R.subscriptions.onPixelDataInsertedError.forEach(function(e){e(t)})}};return ji.set(e,R),R}var qi=n(25);function Ai(t){return parseFloat(".".concat(t))}function Ni(t){if(!t.loaded&&!t.isLoading){var e,n=t.imageIds,r=t.vtkImageData,a=t.metaDataMap,i=t.sortedDatasets,o=n[0],s=Ei.a.metaData.get("generalSeriesModule",o),u=s&&s.modality;"PT"===u&&(e=function(t){var e=Ei.a.metaData.get("generalSeriesModule",t),n=Ei.a.metaData.get("patientStudyModule",t);if(!n)throw new Error("patientStudyModule metadata is required");var r=n.patientWeight;if(!r)throw new Error("patientWeight must be present in patientStudyModule for modality PT");var a=Ei.a.metaData.get("petIsotopeModule",t);if(!a)throw new Error("petSequenceModule metadata is required");var i=a.radiopharmaceuticalInfo,o=i.radiopharmaceuticalStartTime,s=i.radionuclideTotalDose,u=i.radionuclideHalfLife,c=e.seriesTime;if(!(o&&s&&u&&c))throw new Error("The required radiopharmaceutical information was not present.");var d=Ai(c.fractionalSeconds||0)+c.seconds+60*c.minutes+60*c.hours*60-(Ai(o.fractionalSeconds)+o.seconds+60*o.minutes+60*o.hours*60);return{patientWeight:r,correctedDose:s*Math.exp(-d*Math.log(2)/u)}}(o)),t.isLoading=!0,r.getPointData().getScalars().getData()[0]=1;var c={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY},d=n.length,l=0,f=d/5,h=f;!function(t,e,n){t.forEach(function(t){qi.requestPoolManager.addRequest({},t,Fi,Li,e,n)}),qi.requestPoolManager.startGrabbing()}(n,function(n){var o=a.get(n.imageId).imagePositionPatient,s=i.findIndex(function(t){return t.imagePositionPatient===o}),p=function(t,e,n,r,a){for(var i=t.getPointData().getScalars().getData(),o=function(t,e,n){var r=e.slope,a=e.intercept;if("PT"===t){var i=n.patientWeight,o=n.correctedDose;return function(t){var e=t*r+a;return 1e3*e*i/o}}return function(t){return t*r+a}}(r,n,a),s=n.getPixelData(),u=s.length,c=o(s[0]),d=c,l=0;l<s.length;l++){var f=l+e*u,h=o(s[l]);h>c?c=h:h<d&&(d=h),i[f]=h}return{min:d,max:c}}(r,s,n,u,e),g=p.max,m=p.min;g>c.max&&(c.max=g),m<c.min&&(c.min=m),r.getPointData().getScalars().setRange(c,1),++l>h&&(h+=f,r.modified()),t._publishPixelDataInserted(l),l===d&&t._publishAllPixelDataInserted()},function(e){l++,t._publishPixelDataInsertedError(e),l===d&&t._publishAllPixelDataInserted()})}}var Fi="prefetch",Li=!1;var Vi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){for(var n=t.getProperty().getRGBTransferFunction(0),r=n.getSize(),a=0;a<r;a++){var i=[];n.getNodeValue(a,i),i[1]=1-i[1],i[2]=1-i[2],i[3]=1-i[3],n.setNodeValue(a,i)}e instanceof Function?e():e&&e.render&&e.render()}};n.d(e,"View2D",function(){return ui}),n.d(e,"View3D",function(){return di}),n.d(e,"ViewportOverlay",function(){return Ha}),n.d(e,"ViewportData",function(){return _n}),n.d(e,"getImageData",function(){return Ui}),n.d(e,"loadImageData",function(){return Ni}),n.d(e,"vtkInteractorStyleMPRWindowLevel",function(){return mi}),n.d(e,"vtkInteractorStyleMPRCrosshairs",function(){return Mi}),n.d(e,"vtkInteractorStyleMPRRotate",function(){return Ti}),n.d(e,"vtkInteractorStyleMPRSlice",function(){return Jn}),n.d(e,"vtkSVGWidgetManager",function(){return ur}),n.d(e,"vtkSVGCrosshairsWidget",function(){return Wi}),n.d(e,"invertVolume",function(){return Vi}),n.d(e,"EVENTS",function(){return Gn});e.default=ui}])});
//# sourceMappingURL=index.umd.min.js.map